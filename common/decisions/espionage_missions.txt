espionage_missions = {

	espionage_mission_reshuffle = {

		allowed = { always = yes }

		icon = ger_mefo_bills

		available = {
			hidden_trigger = { always = no }
		}

		cost = 0

		days_mission_timeout = 180
		is_good = yes

		cancel_trigger = {
			always = no
		}

		days_remove = 28

		timeout_effect = {
			#reset character flags
			var:targeted_country_slot_1 = {
				all_unit_leader = {
					if = {
						limit = {
						 	has_character_flag = targeted_by_mission
						}
						if = {
							limit = {
								has_character_flag = targeted_by_@ROOT_murder
							}								
								clr_character_flag = targeted_by_@ROOT_murder
						}
						if = {
							limit = {
								has_character_flag = targeted_by_@ROOT_ransom
							}								
								clr_character_flag = targeted_by_@ROOT_ransom
						}
					} 
				}
			}
			if = {
				limit = {
					has_character_flag = targeted_by_training
				}								
					clr_character_flag = targeted_by_training
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = slot_1_filled
					}
				}
				random_list = {
					var:amount_of_bounty_hunters = {
						random_list = {
							33 = {
								set_country_flag = slot_1_filled
								set_country_flag = assassinate_slot_1
								if = {
									limit = {
										has_war = yes
									}
									any_enemy_country = {
										set_variable = { targeted_country_slot_1 = ROOT.id }
									}
								}else = {
									grab_semi_hostile_nation = yes
								}
								var:targeted_country_slot_1 = {
									random_unit_leader = {
										if = {
											limit = {
												NOT = {
													has_character_flag = important
													has_character_flag = targeted_by_mission
												}
											}
											set_character_flag = targeted_by_@ROOT_murder
											set_character_flag = targeted_by_mission
										}
									}
								}
							}
							33 = {
								set_country_flag = slot_1_filled
								set_country_flag = ransom_slot_1
								if = {
									limit = {
										has_war = yes
									}
									any_enemy_country = {
										set_variable = { targeted_country_slot_1 = ROOT.id }
									}
								}else = {
									grab_semi_hostile_nation = yes
								}
								var:targeted_country_slot_1 = {
									random_unit_leader = {
										if = {
											limit = {
												NOT = {
													has_character_flag = important
													has_character_flag = targeted_by_mission
												}
											}
											set_character_flag = targeted_by_@ROOT_ransom
											set_character_flag = targeted_by_mission
										}
									}
								}
							}
							33 = {
								set_country_flag = slot_1_filled
								set_country_flag = army_training_slot_1
								random_unit_leader = {
									if = {
										limit = {
											NOT = {
												has_character_flag = important
												has_character_flag = targeted_by_mission
											}
										}
										set_character_flag = targeted_by_mission
										set_character_flag = targeted_by_training
									}
								}
							}
						}
					}
					var:amount_of_smugglers = {
						16 = {
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
							set_country_flag = slot_1_filled
							set_country_flag = steal_equipment_slot_1
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = set_Slaves_free_slot_1
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = smuggle_slaves_slot_1
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = arming_dissadents_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = provoke_slave_revolt_slot_1
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = plant_sleeper_agent_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:amount_of_spies = {
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = capitial_ship_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = sabotage_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = infilitrate_military_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = undermind_guild_connections_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = turn_agent_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_1_filled
							set_country_flag = steal_blueprint_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:amount_of_technicians = {
						25 = {
							set_country_flag = slot_1_filled
							set_country_flag = cyber_attack_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_1_filled
							set_country_flag = steal_blueprint_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_1_filled
							set_country_flag = sprout_disease_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_1_filled
							set_country_flag = logistics_sabotage_target_slot_1
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_1 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:other_missions = {
						probe_loyality = {
							set_country_flag = slot_1_filled
							set_country_flag = probe_loyality_target_slot_1
						}
					} ### SLOT 1 SELECTOR
				}
				random_list = {
					var:amount_of_bounty_hunters = {
						random_list = {
							33 = {
								set_country_flag = slot_2_filled
								set_country_flag = assassinate_slot_2
								if = {
									limit = {
										has_war = yes
									}
									any_enemy_country = {
										set_variable = { targeted_country_slot_2 = ROOT.id }
									}
								}else = {
									grab_semi_hostile_nation = yes
								}
								var:targeted_country_slot_2 = {
									random_unit_leader = {
										if = {
											limit = {
												NOT = {
													has_character_flag = important
													has_character_flag = targeted_by_mission
												}
											}
											set_character_flag = targeted_by_@ROOT_murder
											set_character_flag = targeted_by_mission
										}
									}
								}
							}
							33 = {
								set_country_flag = slot_2_filled
								set_country_flag = ransom_slot_2
								if = {
									limit = {
										has_war = yes
									}
									any_enemy_country = {
										set_variable = { targeted_country_slot_2 = ROOT.id }
									}
								}else = {
									grab_semi_hostile_nation = yes
								}
								var:targeted_country_slot_2 = {
									random_unit_leader = {
										if = {
											limit = {
												NOT = {
													has_character_flag = important
													has_character_flag = targeted_by_mission
												}
											}
											set_character_flag = targeted_by_@ROOT_ransom
											set_character_flag = targeted_by_mission
										}
									}
								}
							}
							33 = {
								set_country_flag = slot_2_filled
								set_country_flag = army_training_slot_2
								random_unit_leader = {
									if = {
										limit = {
											NOT = {
												has_character_flag = important
												has_character_flag = targeted_by_mission
											}
										}
										set_character_flag = targeted_by_mission
										set_character_flag = targeted_by_training
									}
								}
							}
						}
					}
					var:amount_of_smugglers = {
						16 = {
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
							set_country_flag = slot_2_filled
							set_country_flag = steal_equipment_slot_2
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = set_Slaves_free_slot_2
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = smuggle_slaves_slot_2
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = arming_dissadents_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = provoke_slave_revolt_slot_2
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = plant_sleeper_agent_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:amount_of_spies = {
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = capitial_ship_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = sabotage_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = infilitrate_military_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = undermind_guild_connections_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = turn_agent_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_2_filled
							set_country_flag = steal_blueprint_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:amount_of_technicians = {
						25 = {
							set_country_flag = slot_2_filled
							set_country_flag = cyber_attack_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_2_filled
							set_country_flag = steal_blueprint_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_2_filled
							set_country_flag = sprout_disease_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_2_filled
							set_country_flag = logistics_sabotage_target_slot_2
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_2 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:other_missions = {
						probe_loyality = {
							set_country_flag = slot_2_filled
							set_country_flag = probe_loyality_target_slot_2
						}
					} ### SLOT 1 SELECTOR
				}
				random_list = {
					var:amount_of_bounty_hunters = {
						random_list = {
							33 = {
								set_country_flag = slot_3_filled
								set_country_flag = assassinate_slot_3
								if = {
									limit = {
										has_war = yes
									}
									any_enemy_country = {
										set_variable = { targeted_country_slot_3 = ROOT.id }
									}
								}else = {
									grab_semi_hostile_nation = yes
								}
								var:targeted_country_slot_3 = {
									random_unit_leader = {
										if = {
											limit = {
												NOT = {
													has_character_flag = important
													has_character_flag = targeted_by_mission
												}
											}
											set_character_flag = targeted_by_@ROOT_murder
											set_character_flag = targeted_by_mission
										}
									}
								}
							}
							33 = {
								set_country_flag = slot_3_filled
								set_country_flag = ransom_slot_3
								if = {
									limit = {
										has_war = yes
									}
									any_enemy_country = {
										set_variable = { targeted_country_slot_3 = ROOT.id }
									}
								}else = {
									grab_semi_hostile_nation = yes
								}
								var:targeted_country_slot_3 = {
									random_unit_leader = {
										if = {
											limit = {
												NOT = {
													has_character_flag = important
													has_character_flag = targeted_by_mission
												}
											}
											set_character_flag = targeted_by_@ROOT_ransom
											set_character_flag = targeted_by_mission
										}
									}
								}
							}
							33 = {
								set_country_flag = slot_3_filled
								set_country_flag = army_training_slot_3
								random_unit_leader = {
									if = {
										limit = {
											NOT = {
												has_character_flag = important
												has_character_flag = targeted_by_mission
											}
										}
										set_character_flag = targeted_by_mission
										set_character_flag = targeted_by_training
									}
								}
							}
						}
					}
					var:amount_of_smugglers = {
						16 = {
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
							set_country_flag = slot_3_filled
							set_country_flag = steal_equipment_slot_3
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = set_Slaves_free_slot_3
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = smuggle_slaves_slot_3
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = arming_dissadents_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = provoke_slave_revolt_slot_3
							slave_raid_selector = yes
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = plant_sleeper_agent_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:amount_of_spies = {
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = capitial_ship_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = sabotage_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = infilitrate_military_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = undermind_guild_connections_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = turn_agent_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						16 = {
							set_country_flag = slot_3_filled
							set_country_flag = steal_blueprint_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:amount_of_technicians = {
						25 = {
							set_country_flag = slot_3_filled
							set_country_flag = cyber_attack_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_3_filled
							set_country_flag = steal_blueprint_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_3_filled
							set_country_flag = sprout_disease_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
						25 = {
							set_country_flag = slot_3_filled
							set_country_flag = logistics_sabotage_target_slot_3
							if = {
								limit = {
									has_war = yes
								}
								any_enemy_country = {
									set_variable = { targeted_country_slot_3 = ROOT.id }
								}
							}else = {
								grab_semi_hostile_nation = yes
							}
						}
					}
					var:other_missions = {
						probe_loyality = {
							set_country_flag = slot_3_filled
							set_country_flag = probe_loyality_target_slot_3
						}
					} ### SLOT 1 SELECTOR
				}
			}
		}

		ai_will_do = {
			#factor = 200
		}
	}
	slot_1 = {

		allowed = { always = yes }

		icon = ger_mefo_bills

		available = {
			hidden_trigger = { always = no }
		}

		#cost = GER_mefo_bill_counter?10

		days_remove  = 130
		is_good = yes
		fire_only_once = no
		remove_effect  = {
			if = {
					### EXAMPLE SKILL CHECK ###
					# set_variable = { agent_operation_slot_1 = ### GRABS OPERATIVE FROM PALPYS GRIDBOX}
					# set_variable = { agent_loyality@var:agent_operation_slot_1 = 12 }
					# check_variable = { agent_loyality@var:agent_operation_slot_1 = 12 }  ## WOULD I GET 12 TELL ME YES
					# check_variable = { agent_martial@var:agent_operation_slot_1 = 12 }
					# check_variable = { agent_charisma@var:agent_operation_slot_1 = 12 }
					# check_variable = { agent_intelligence@var:agent_operation_slot_1 = 12 }
				limit = {
					has_country_flag = slot_1_filled
				}
				randomize_temp_variable = {  ## success and failure chance generator
				  var = chance_of_success_1
				  distribution = uniform
				  min = 1
				  max = 100
				}
				############# BOUNTY HUNTER ##############################
				if = {                  ########### ASSASSIN ONLY WOUNDS
					limit = {
						has_country_flag = assassinate_slot_1 
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 } ## find characters martial and sets tempAverage to then work out success chance
					multiply_temp_variable = { tempAverage = 6 } ## 6 factor
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempMartial}
						}
						if = {
							limit = {
								check_variable = {chance_of_success_1 > 10}
							}
							var:targeted_country_slot_1 = {
								all_unit_leader = {
									limit = {
										has_character_flag = targeted_by_mission
										has_character_flag = targeted_by_@ROOT_murder
									}
									add_timed_unit_leader_trait = {
										trait = wounded
										days = 180
									}
									unit_leader_event = {id = espionage.1}
								}
							}
						}else = {														 ### CRITICAL SUCCESSS
							var:targeted_country_slot_1 = { ### ASSASSIN KILLS TARGET
								all_unit_leader = {
									limit = {
										has_character_flag = targeted_by_mission
										has_character_flag = targeted_by_@ROOT_murder
									}
									retire_character = THIS
									unit_leader_event = {id = espionage.2}
								}
							}
						}
					}
					clr_country_flag = assassinate_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = ransom_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							country_event = {
							    id = espionage.3
							    days = 1
							}
						}
					}
					clr_country_flag = ransom_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = army_training_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						add_random_trait = {
							organizer
							cavalry_leader
							infantry_leader
							skilled_staffer
							trickster
							infantry_officer
							armor_officer
						}
					}
					clr_country_flag = army_training_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = intimidate_senator_slot_1 ###### CHANGE_ME
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
					}
					clr_country_flag = intimidate_senator_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				########### TECHNICIAN ##################################
				if = {
					limit = {
						has_country_flag = cyber_attack_target_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							add_timed_idea = {
							    idea = cyber_attack_espionage
							    days = 100
							}
						}
					}
					clr_country_flag = cyber_attack_target_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = steal_blueprint_target_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							steal_random_tech_bonus = {
								folder = electronics_folder
								folder = industry_folder
								bonus = 3.0
								dynamic = no
								instant = yes
								name = operation_steal_tech_civilian
								target = FROM
								uses = 1
							}
						}
					}
					clr_country_flag = steal_blueprint_target_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = sprout_disease_target_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							capital_scope = {
								add_manpower = -50000
							}
						}
					}
					clr_country_flag = sprout_disease_target_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = logisitics_target_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							add_timed_idea = {
							    idea = logistics_sabotage_espionage
							    days = 40
							}
						}
					}
					clr_country_flag = logisitics_target_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				### SPY ####
				if = {
					limit = {
						has_country_flag = sabotage_target_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 12 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							while_loop_effect = {
							    break = temp_break
							    limit = {
							    	NOT = {
							        	has_variable = targeted_country_slot_1
							        }
							    }
							    random_core_state = {
							    	if = {
							    		limit = {
							    			arms_factory > 1
							    		}
							    		remove_building = {
										    type = arms_factory
										    level = 1
										}
										set_temp_variable = {temp_break = 1}
							    	}else_if = {
							    		limit = {
							    			industrial_complex > 1
							    		}
							    		remove_building = {
										    type = industrial_complex
										    level = 1
										}
										set_temp_variable = {temp_break = 1}
							    	}
							    }
							}
						}
					}
					clr_country_flag = sabotage_target_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = infiltrate_military_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 6 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						add_intel = {
						    target = var:targeted_country_slot_1
						    army_intel = 30
						    navy_intel = 30
						    airforce_intel = 30
						}
					}
					clr_country_flag = infiltrate_military_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = undermine_guild_connections_slot_1 ## CHANGE_ME no idea how to do this palpy help
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
					}
					clr_country_flag = undermine_guild_connections_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = turn_agent_slot_1 ## CHANGE_ME lol no, leaving that till last
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 6 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
					}
					clr_country_flag = turn_agent_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = capital_ship_slot_1 ## finds biggest capital ship (Super star destroyers not included due to how busted that would be)
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							if = {
								limit = {
									check_variable = {
										var = num_ships_with_type@carrier  ## CHANGE_ME, need to ask diosysnus about ship types
										value = 1
										compare = greater_than
									}
									destroy_ships = {
									    type = carrier
									    count = 1
									}
								}

							}else_if = {
								limit = {
									check_variable = {
										var = num_ships_with_type@battleship ## CHANGE_ME, need to ask diosysnus about ship types
										value = 1
										compare = greater_than
									}
									destroy_ships = {
									    type = battleship
									    count = 1
									}
								}		
							}
						}
					}
					clr_country_flag = capital_ship_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				####### SMUGGLER ###############
				if = {
					limit = {
						has_country_flag = steal_equipment_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							send_equipment_fraction = {
							    value = 0.02
							    target = PREV
							}
						}
					}
					clr_country_flag = steal_equipment_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = smuggle_slaves_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							find_highest_in_array = { 
								array = slaves
								value = slave_value_count_temp
								index = slave_index_espionage_temp
							}
							divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
							multiply_variable = {slave_value_count_temp = 2}
							round_variable = slave_value_count_temp
							set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
						}
						set_variable = { slaves^targeted_country_slot_1.slave_index_espionage_temp = var:targeted_country_slot_1.slave_value_count_temp} ## this is stupid and should be treated as such
					}
					clr_country_flag = set_Slaves_free_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = set_Slaves_free_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							find_highest_in_array = { 
								array = slaves
								value = slave_value_count_temp
								index = slave_index_espionage_temp
							}
							divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
							multiply_variable = {slave_value_count_temp = 2}
							round_variable = slave_value_count_temp
							set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
						}
					}
					clr_country_flag = set_Slaves_free_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = provoke_slave_revolt_slot_1_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 4 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							set_temp_variable = { slave_total_count_temp = 0 }
							for_each_loop = {
								array = slaves
								value = slave_index_count

								add_to_temp_variable = {slave_total_count_temp = slave_index_count}
							}
							divide_variable = {slave_total_count_temp = 800000}
							random_core_state = {
								 set_variable = { core_temp_state = THIS.id}
							}
							start_civil_war = {
							    ruling_party = neutrality
							    ideology = ROOT
							    size = slave_total_count_temp
							    capital = var:core_temp_state
							    navy_ratio = 0
							    states = {
							        var:core_temp_state
							    }
							    keep_unit_leaders_trigger = {
							    	always = yes
							    }
							    keep_political_leader = yes
							    keep_political_party_members = yes
							}
						}
					}
					clr_country_flag = provoke_slave_revolt_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = arming_dissadents_slot_1_slot_1
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							every_controlled_state = {
								limit = {
									has_active_resistance = yes
								}
								add_resistance = 20 
							}
						}
					}
					clr_country_flag = arming_dissadents_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = plant_sleeper_agent_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 12 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						set_variable = {higher_chance_espionage_target = var:targeted_country_slot_1.id }
					}
					clr_country_flag = plant_sleeper_agent_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = market_flood_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							subtract_from_variable = { currency_amount^primary_currency = 1000 }
						}
					}
					clr_country_flag = plant_sleeper_agent_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
				if = {
					limit = {
						has_country_flag = reroute_supply_slot_1
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_1 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_1 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_1 >= tempAverage}
						}
						var:targeted_country_slot_1 = {
							capital_scope = {
								give_resource_rights = { receiver = ROOT state = THIS }
								every_neighbor_state = {
									give_resource_rights = { receiver = ROOT state = THIS }
								}
							}
							country_event = {
							    id = espionage.4
							    days = 80
							}
						}
					}
					clr_country_flag = reroute_supply_slot_1
					clr_country_flag = slot_1_filled
					clear_variable = targeted_country_slot_1
				}
			}
		}
	}
	slot_2 = {

		allowed = { always = yes }

		icon = ger_mefo_bills

		available = {
			hidden_trigger = { always = no }
		}

		#cost = GER_mefo_bill_counter?10

		days_remove  = 130
		is_good = yes
		fire_only_once = no
		remove_effect  = {
			if = {
				limit = {
					has_country_flag = slot_2_filled
				}
				randomize_temp_variable = {  ## success and failure chance generator
				  var = chance_of_success_2
				  distribution = uniform
				  min = 1
				  max = 100
				}
				############# BOUNTY HUNTER ##############################
				if = {                  ########### ASSASSIN ONLY WOUNDS
					limit = {
						has_country_flag = assassinate_slot_2 
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 } ## find characters martial and sets tempAverage to then work out success chance
					multiply_temp_variable = { tempAverage = 6 } ## 6 factor
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempMartial}
						}
						if = {
							limit = {
								check_variable = {chance_of_success_2 > 10}
							}
							var:targeted_country_slot_2 = {
								all_unit_leader = {
									limit = {
										has_character_flag = targeted_by_mission
										has_character_flag = targeted_by_@ROOT_murder
									}
									add_timed_unit_leader_trait = {
										trait = wounded
										days = 180
									}
									unit_leader_event = {id = espionage.1}
								}
							}
						}else = {														 ### CRITICAL SUCCESSS
							var:targeted_country_slot_2 = { ### ASSASSIN KILLS TARGET
								all_unit_leader = {
									limit = {
										has_character_flag = targeted_by_mission
										has_character_flag = targeted_by_@ROOT_murder
									}
									retire_character = THIS
									unit_leader_event = {id = espionage.2}
								}
							}
						}
					}
					clr_country_flag = assassinate_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = ransom_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							country_event = {
							    id = espionage.3
							    days = 1
							}
						}
					}
					clr_country_flag = ransom_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = army_training_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						add_random_trait = {
							organizer
							cavalry_leader
							infantry_leader
							skilled_staffer
							trickster
							infantry_officer
							armor_officer
						}
					}
					clr_country_flag = army_training_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = intimidate_senator_slot_2 ###### CHANGE_ME
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
					}
					clr_country_flag = intimidate_senator_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				########### TECHNICIAN ##################################
				if = {
					limit = {
						has_country_flag = cyber_attack_target_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							add_timed_idea = {
							    idea = cyber_attack_espionage
							    days = 100
							}
						}
					}
					clr_country_flag = cyber_attack_target_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = steal_blueprint_target_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							steal_random_tech_bonus = {
								folder = electronics_folder
								folder = industry_folder
								bonus = 3.0
								dynamic = no
								instant = yes
								name = operation_steal_tech_civilian
								target = FROM
								uses = 1
							}
						}
					}
					clr_country_flag = steal_blueprint_target_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = sprout_disease_target_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							capital_scope = {
								add_manpower = -50000
							}
						}
					}
					clr_country_flag = sprout_disease_target_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = logisitics_target_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							add_timed_idea = {
							    idea = logistics_sabotage_espionage
							    days = 40
							}
						}
					}
					clr_country_flag = logisitics_target_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				### SPY ####
				if = {
					limit = {
						has_country_flag = sabotage_target_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 12 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							while_loop_effect = {
							    break = temp_break
							    limit = {
							    	NOT = {
							        	has_variable = targeted_country_slot_2
							        }
							    }
							    random_core_state = {
							    	if = {
							    		limit = {
							    			arms_factory > 1
							    		}
							    		remove_building = {
										    type = arms_factory
										    level = 1
										}
										set_temp_variable = {temp_break = 1}
							    	}else_if = {
							    		limit = {
							    			industrial_complex > 1
							    		}
							    		remove_building = {
										    type = industrial_complex
										    level = 1
										}
										set_temp_variable = {temp_break = 1}
							    	}
							    }
							}
						}
					}
					clr_country_flag = sabotage_target_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = infiltrate_military_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 6 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						add_intel = {
						    target = var:targeted_country_slot_2
						    army_intel = 30
						    navy_intel = 30
						    airforce_intel = 30
						}
					}
					clr_country_flag = infiltrate_military_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = undermine_guild_connections_slot_2 ## CHANGE_ME no idea how to do this palpy help
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
					}
					clr_country_flag = undermine_guild_connections_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = turn_agent_slot_2 ## CHANGE_ME lol no, leaving that till last
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 6 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
					}
					clr_country_flag = turn_agent_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = capital_ship_slot_2 ## finds biggest capital ship (Super star destroyers not included due to how busted that would be)
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							if = {
								limit = {
									check_variable = {
										var = num_ships_with_type@carrier  ## CHANGE_ME, need to ask diosysnus about ship types
										value = 1
										compare = greater_than
									}
									destroy_ships = {
									    type = carrier
									    count = 1
									}
								}

							}else_if = {
								limit = {
									check_variable = {
										var = num_ships_with_type@battleship ## CHANGE_ME, need to ask diosysnus about ship types
										value = 1
										compare = greater_than
									}
									destroy_ships = {
									    type = battleship
									    count = 1
									}
								}		
							}
						}
					}
					clr_country_flag = capital_ship_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				####### SMUGGLER ###############
				if = {
					limit = {
						has_country_flag = steal_equipment_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							send_equipment_fraction = {
							    value = 0.02
							    target = PREV
							}
						}
					}
					clr_country_flag = steal_equipment_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = smuggle_slaves_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							find_highest_in_array = { 
								array = slaves
								value = slave_value_count_temp
								index = slave_index_espionage_temp
							}
							divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
							multiply_variable = {slave_value_count_temp = 2}
							round_variable = slave_value_count_temp
							set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
						}
						set_variable = { slaves^targeted_country_slot_2.slave_index_espionage_temp = var:targeted_country_slot_2.slave_value_count_temp} ## this is stupid and should be treated as such
					}
					clr_country_flag = set_Slaves_free_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = set_Slaves_free_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							find_highest_in_array = { 
								array = slaves
								value = slave_value_count_temp
								index = slave_index_espionage_temp
							}
							divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
							multiply_variable = {slave_value_count_temp = 2}
							round_variable = slave_value_count_temp
							set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
						}
					}
					clr_country_flag = set_Slaves_free_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = provoke_slave_revolt_slot_2_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 4 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							set_temp_variable = { slave_total_count_temp = 0 }
							for_each_loop = {
								array = slaves
								value = slave_index_count

								add_to_temp_variable = {slave_total_count_temp = slave_index_count}
							}
							divide_variable = {slave_total_count_temp = 800000}
							random_core_state = {
								 set_variable = { core_temp_state = THIS.id}
							}
							start_civil_war = {
							    ruling_party = neutrality
							    ideology = ROOT
							    size = slave_total_count_temp
							    capital = var:core_temp_state
							    navy_ratio = 0
							    states = {
							        var:core_temp_state
							    }
							    keep_unit_leaders_trigger = {
							    	always = yes
							    }
							    keep_political_leader = yes
							    keep_political_party_members = yes
							}
						}
					}
					clr_country_flag = provoke_slave_revolt_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = arming_dissadents_slot_2_slot_2
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							every_controlled_state = {
								limit = {
									has_active_resistance = yes
								}
								add_resistance = 20 
							}
						}
					}
					clr_country_flag = arming_dissadents_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = plant_sleeper_agent_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 12 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						set_variable = {higher_chance_espionage_target = var:targeted_country_slot_2.id }
					}
					clr_country_flag = plant_sleeper_agent_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = market_flood_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							subtract_from_variable = { currency_amount^primary_currency = 1000 }
						}
					}
					clr_country_flag = plant_sleeper_agent_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
				if = {
					limit = {
						has_country_flag = reroute_supply_slot_2
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_2 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_2 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_2 >= tempAverage}
						}
						var:targeted_country_slot_2 = {
							capital_scope = {
								give_resource_rights = { receiver = ROOT state = THIS }
								every_neighbor_state = {
									give_resource_rights = { receiver = ROOT state = THIS }
								}
							}
							country_event = {
							    id = espionage.4
							    days = 80
							}
						}
					}
					clr_country_flag = reroute_supply_slot_2
					clr_country_flag = slot_2_filled
					clear_variable = targeted_country_slot_2
				}
			}
		}
	}
	slot_3 = {

		allowed = { always = yes }

		icon = ger_mefo_bills

		available = {
			hidden_trigger = { always = no }
		}

		#cost = GER_mefo_bill_counter?10

		days_remove  = 130
		is_good = yes
		fire_only_once = no
		remove_effect  = {
			if = {
				limit = {
					has_country_flag = slot_3_filled
				}
				randomize_temp_variable = {  ## success and failure chance generator
				  var = chance_of_success_3
				  distribution = uniform
				  min = 1
				  max = 100
				}
				############# BOUNTY HUNTER ##############################
				if = {                  ########### ASSASSIN ONLY WOUNDS
					limit = {
						has_country_flag = assassinate_slot_3 
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 } ## find characters martial and sets tempAverage to then work out success chance
					multiply_temp_variable = { tempAverage = 6 } ## 6 factor
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempMartial}
						}
						if = {
							limit = {
								check_variable = {chance_of_success_3 > 10}
							}
							var:targeted_country_slot_3 = {
								all_unit_leader = {
									limit = {
										has_character_flag = targeted_by_mission
										has_character_flag = targeted_by_@ROOT_murder
									}
									add_timed_unit_leader_trait = {
										trait = wounded
										days = 180
									}
									unit_leader_event = {id = espionage.1}
								}
							}
						}else = {														 ### CRITICAL SUCCESSS
							var:targeted_country_slot_3 = { ### ASSASSIN KILLS TARGET
								all_unit_leader = {
									limit = {
										has_character_flag = targeted_by_mission
										has_character_flag = targeted_by_@ROOT_murder
									}
									retire_character = THIS
									unit_leader_event = {id = espionage.2}
								}
							}
						}
					}
					clr_country_flag = assassinate_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = ransom_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							country_event = {
							    id = espionage.3
							    days = 1
							}
						}
					}
					clr_country_flag = ransom_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = army_training_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						add_random_trait = {
							organizer
							cavalry_leader
							infantry_leader
							skilled_staffer
							trickster
							infantry_officer
							armor_officer
						}
					}
					clr_country_flag = army_training_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = intimidate_senator_slot_3 ###### CHANGE_ME
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
					}
					clr_country_flag = intimidate_senator_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				########### TECHNICIAN ##################################
				if = {
					limit = {
						has_country_flag = cyber_attack_target_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							add_timed_idea = {
							    idea = cyber_attack_espionage
							    days = 100
							}
						}
					}
					clr_country_flag = cyber_attack_target_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = steal_blueprint_target_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							steal_random_tech_bonus = {
								folder = electronics_folder
								folder = industry_folder
								bonus = 3.0
								dynamic = no
								instant = yes
								name = operation_steal_tech_civilian
								target = FROM
								uses = 1
							}
						}
					}
					clr_country_flag = steal_blueprint_target_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = sprout_disease_target_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							capital_scope = {
								add_manpower = -50000
							}
						}
					}
					clr_country_flag = sprout_disease_target_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = logisitics_target_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							add_timed_idea = {
							    idea = logistics_sabotage_espionage
							    days = 40
							}
						}
					}
					clr_country_flag = logisitics_target_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				### SPY ####
				if = {
					limit = {
						has_country_flag = sabotage_target_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 12 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							while_loop_effect = {
							    break = temp_break
							    limit = {
							    	NOT = {
							        	has_variable = targeted_country_slot_3
							        }
							    }
							    random_core_state = {
							    	if = {
							    		limit = {
							    			arms_factory > 1
							    		}
							    		remove_building = {
										    type = arms_factory
										    level = 1
										}
										set_temp_variable = {temp_break = 1}
							    	}else_if = {
							    		limit = {
							    			industrial_complex > 1
							    		}
							    		remove_building = {
										    type = industrial_complex
										    level = 1
										}
										set_temp_variable = {temp_break = 1}
							    	}
							    }
							}
						}
					}
					clr_country_flag = sabotage_target_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = infiltrate_military_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 6 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						add_intel = {
						    target = var:targeted_country_slot_3
						    army_intel = 30
						    navy_intel = 30
						    airforce_intel = 30
						}
					}
					clr_country_flag = infiltrate_military_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = undermine_guild_connections_slot_3 ## CHANGE_ME no idea how to do this palpy help
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
					}
					clr_country_flag = undermine_guild_connections_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = turn_agent_slot_3 ## CHANGE_ME lol no, leaving that till last
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 6 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
					}
					clr_country_flag = turn_agent_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = capital_ship_slot_3 ## finds biggest capital ship (Super star destroyers not included due to how busted that would be)
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 5 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							if = {
								limit = {
									check_variable = {
										var = num_ships_with_type@carrier  ## CHANGE_ME, need to ask diosysnus about ship types
										value = 1
										compare = greater_than
									}
									destroy_ships = {
									    type = carrier
									    count = 1
									}
								}

							}else_if = {
								limit = {
									check_variable = {
										var = num_ships_with_type@battleship ## CHANGE_ME, need to ask diosysnus about ship types
										value = 1
										compare = greater_than
									}
									destroy_ships = {
									    type = battleship
									    count = 1
									}
								}		
							}
						}
					}
					clr_country_flag = capital_ship_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				####### SMUGGLER ###############
				if = {
					limit = {
						has_country_flag = steal_equipment_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							send_equipment_fraction = {
							    value = 0.02
							    target = PREV
							}
						}
					}
					clr_country_flag = steal_equipment_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = smuggle_slaves_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							find_highest_in_array = { 
								array = slaves
								value = slave_value_count_temp
								index = slave_index_espionage_temp
							}
							divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
							multiply_variable = {slave_value_count_temp = 2}
							round_variable = slave_value_count_temp
							set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
						}
						set_variable = { slaves^targeted_country_slot_3.slave_index_espionage_temp = var:targeted_country_slot_3.slave_value_count_temp} ## this is stupid and should be treated as such
					}
					clr_country_flag = set_Slaves_free_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = set_Slaves_free_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							find_highest_in_array = { 
								array = slaves
								value = slave_value_count_temp
								index = slave_index_espionage_temp
							}
							divide_variable = {slave_value_count_temp = 3} ## Thought this might be cleaner
							multiply_variable = {slave_value_count_temp = 2}
							round_variable = slave_value_count_temp
							set_variable = { slaves^slave_index_espionage_temp = slave_value_count_temp }
						}
					}
					clr_country_flag = set_Slaves_free_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = provoke_slave_revolt_slot_3_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 4 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							set_temp_variable = { slave_total_count_temp = 0 }
							for_each_loop = {
								array = slaves
								value = slave_index_count

								add_to_temp_variable = {slave_total_count_temp = slave_index_count}
							}
							divide_variable = {slave_total_count_temp = 800000}
							random_core_state = {
								 set_variable = { core_temp_state = THIS.id}
							}
							start_civil_war = {
							    ruling_party = neutrality
							    ideology = ROOT
							    size = slave_total_count_temp
							    capital = var:core_temp_state
							    navy_ratio = 0
							    states = {
							        var:core_temp_state
							    }
							    keep_unit_leaders_trigger = {
							    	always = yes
							    }
							    keep_political_leader = yes
							    keep_political_party_members = yes
							}
						}
					}
					clr_country_flag = provoke_slave_revolt_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = arming_dissadents_slot_3_slot_3
					}
					set_temp_variable = { tempAverage = agent_martial@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 10 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							every_controlled_state = {
								limit = {
									has_active_resistance = yes
								}
								add_resistance = 20 
							}
						}
					}
					clr_country_flag = arming_dissadents_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = plant_sleeper_agent_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 12 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						set_variable = {higher_chance_espionage_target = var:targeted_country_slot_3.id }
					}
					clr_country_flag = plant_sleeper_agent_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = market_flood_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							subtract_from_variable = { currency_amount^primary_currency = 1000 }
						}
					}
					clr_country_flag = plant_sleeper_agent_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
				if = {
					limit = {
						has_country_flag = reroute_supply_slot_3
					}
					set_temp_variable = { tempAverage = agent_intelligence@var:agent_operation_slot_3 }
					add_to_temp_variable = { tempAverage = agent_charisma@var:agent_operation_slot_3 }
					divide_temp_variable = { tempAverage = 2 }
					multiply_temp_variable = { tempAverage = 8 }
					if = {
						limit = {
							check_variable = {chance_of_success_3 >= tempAverage}
						}
						var:targeted_country_slot_3 = {
							capital_scope = {
								give_resource_rights = { receiver = ROOT state = THIS }
								every_neighbor_state = {
									give_resource_rights = { receiver = ROOT state = THIS }
								}
							}
							country_event = {
							    id = espionage.4
							    days = 80
							}
						}
					}
					clr_country_flag = reroute_supply_slot_3
					clr_country_flag = slot_3_filled
					clear_variable = targeted_country_slot_3
				}
			}
		}
	}
}
