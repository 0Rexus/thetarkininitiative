scripted_gui = {

	Warlord_Screen = {
		context_type = player_context
		window_name = "Warlord_Screen"
		visible = {
           has_country_flag = Warlord_Screen_open
		}
		effects = {
			exit_button_click = {
				clr_country_flag = Warlord_Screen_open
			}
			claimant_stance_button_click = {
				if = {
					limit = {
						has_idea = cooperative_stance
					}
					remove_ideas  = cooperative_stance
					add_ideas = claimant_stance
				}
 				else_if = {
					limit = {
						has_idea = antagonizing_stance
					}
					remove_ideas = antagonizing_stance
					add_ideas = claimant_stance
				}
				else_if = {
					limit = {
						has_idea = lip_service_stance
					}
					remove_ideas = lip_service_stance
					add_ideas = claimant_stance
				}
				else = {
					add_ideas = claimant_stance
				}
			}
			cooperative_stance_button_click = {
				if = {
					limit = {
						has_idea = claimant_stance
					}
					remove_ideas = claimant_stance
					add_ideas = cooperative_stance
				}
 				else_if = {
					limit = {
						has_idea = antagonizing_stance
					}
					remove_ideas = antagonizing_stance
					add_ideas = cooperative_stance
				}
				else_if = {
					limit = {
						has_idea = lip_service_stance
					}
					remove_ideas = lip_service_stance
					add_ideas = cooperative_stance
				}
				else = {
					add_ideas = cooperative_stance
				}
			}
			antagonizing_stance_button_click = {
				if = {
					limit = {
						has_idea = cooperative_stance
					}
					remove_ideas = cooperative_stance
					add_ideas = antagonizing_stance
				}
 				else_if = {
					limit = {
						has_idea = claimant_stance
					}
					remove_ideas = claimant_stance
					add_ideas = antagonizing_stance
				}
				else_if = {
					limit = {
						has_idea = lip_service_stance
					}
					remove_ideas = lip_service_stance
					add_ideas = antagonizing_stance
				}
				else = {
					add_ideas = antagonizing_stance
				}
			}
			lip_service_stance_button_click = {
				if = {
					limit = {
						has_idea = cooperative_stance
					}
					remove_ideas = cooperative_stance
					add_ideas = lip_service_stance
				}
 				else_if = {
					limit = {
						has_idea = antagonizing_stance
					}
					remove_ideas = antagonizing_stance
					add_ideas = lip_service_stance
				}
				else_if = {
					limit = {
						has_idea = claimant_stance
					}
					remove_ideas = claimant_stance
					add_ideas = lip_service_stance
				}
				else = {
					add_ideas = lip_service_stance
				}
			}
			leader_empire_click = {
				imperial_legitimacy_coronate = yes ## checks if a ID is the highest legitimacy
				if = {
					limit = {
						tag = var:global.emperor_potential
						check_variable = { legitimacy_emp > 70 }
						has_idea = claimant_stance
					}
					set_country_flag = emperor
					set_cosmetic_tag = IMP
					set_variable = { global.emperor_id = THIS.id }
					country_event = {
					    id = emperor_deals.6
					    days = 4
					}
				}
			}
			warlord_flag_click = {
				capital_scope = {
					ROOT = {
						goto_state = PREV
					}
				}
			}
			doctrine_button_click = {
				if = {
					limit = {
						has_country_flag = policies_open_warlord_screen
					}
					clr_country_flag = policies_open_warlord_screen
				}
				else = {
					set_country_flag = policies_open_warlord_screen
				}
			}
			voting_for_flag_click = {
				capital_scope = {
					ROOT = {
						goto_state = PREV
					}
				}
			}
			warlord_deal_click = {
				if = {
					limit = {
						NOT = {
							has_country_Flag = warlord_deal_open
						}
					}
					set_country_flag = warlord_deal_open
				}
				else = {
					clr_country_flag = warlord_deal_open
				}
			}
			imperial_marshal_picture_click = {
				if = {
					limit = {
						has_country_flag = marshal_open
					}
					clr_country_flag = marshal_open
				}else = {
					set_country_flag = marshal_open	
				}
			}
		}
		triggers = {
			warlord_symbol_visible = {
				THIS = {
					OR = {
					has_country_flag = warlord_imperial
						NOT = {
							has_country_flag = voted_for_warlord
						}
					}
				}
			}
			voting_for_flag_visible = {
				THIS = {
					NOT = {
						has_country_flag = warlord_imperial
					}
					has_country_flag = voted_for_warlord
				}
			}
			voting_for_border_visible = {
				THIS = {
					NOT = {
						has_country_flag = warlord_imperial
					}
					has_country_flag = voted_for_warlord
				}
			}
			voting_for_border_visible = {
				THIS = {
					NOT = {
						has_country_flag = warlord_imperial
					}
					has_country_flag = voted_for_warlord
				}
			}
		}
		dynamic_lists = {
			warlord_grid = {
				array = Global.imperial_warlords
				entry_container = imperial_entry
				change_scope = yes
			}
		}
		properties = {
			warlord_flag = {
				image = "[This.GetFlag]"
			}
			voting_for_flag = {
				image = "[Getvoting_for]"
			}
			leader_empire = {
				image = "[get_emperor_picture]"
			}
			imperial_marshal_picture = {
				image = "[get_marshal_picture]"
			}
		}
	}
	Warlord_Screen_deals = {
		context_type = player_context
		window_name = "Warlord_Screen_deals"
		visible = {
           has_country_flag = warlord_deal_open
		}
		effects = {
			exit_button_click = {
				clr_country_flag = warlord_deal_open
			}
			imperial_logo_click = {
				set_variable = { Root.selected_country_voting = i }
				add_to_array = { voting_array = This.id }
				set_variable = { ROOT.selected_nation_var = This.id }
			}
			warlord_flag_click = {
				set_variable = { Root.selected_country_voting = i }
				add_to_array = { voting_array = This.id }
				set_variable = { ROOT.selected_nation_var = This.id }
			}
			warlord_money_deal_click = {
				var:ROOT.selected_nation_var = {
					country_event = {
					    id = emperor_deals.5
					    hours = 3
					}
				}
			}
			warlord_civ_deal_click = {
				var:ROOT.selected_nation_var = {
					country_event = {
					    id = emperor_deals.4
					    hours = 3
					}
				}
			}
			warlord_mil_deal_click = {
				var:ROOT.selected_nation_var = {
					country_event = {
					    id = emperor_deals.3
					    hours = 3
					}
				}
			}
			warlord_deal_click = {
					if = { ## gets rid of vote for faction
						limit = {
							has_country_flag = voted_for_warlord
						}
						if = {
							limit = {
								has_country_flag = voting_for_empire
							}
							EMP = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_pen
							}
							PEN = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_empire_of_hand
							}
							EOH = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_f_t_u
							}
							FTU = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_eri
							}
							ERI = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_zero_command
							}
							ZER = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_kareenth
							}
							REE = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_zsinj
							}
							BES = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_zsinj
							}
							ZSJ = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
						if = {
							limit = {
								has_country_flag = voting_for_rin
							}
							RIN = {
								add_to_variable = {voted_for_count_emp = -1}
							}
						}
					}
					clr_country_flag = voting_for_pen  #### ALL OF THIS COUNTS WHO IS VOTING FOR WHO FOR USING BUTTON AT BOTTOM OF DEALS, TO ADD NEW FACTION FOR VOTE
					clr_country_flag = voting_for_empire ## YOU WILL HAVE TO ADD THEM TO ALL OF THIS, FOLLOW SAME EXAMPLE
					clr_country_flag = voting_for_empire_of_hand
					clr_country_flag = voting_for_f_t_u
					clr_country_flag = voting_for_eri
					clr_country_flag = voting_zero_command
					clr_country_flag = voting_for_kareenth
					clr_country_flag = voting_for_bespin
					clr_country_flag = voting_for_zsinj
					clr_country_flag = voting_for_rin
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = EMP.id }
						}
						set_country_flag = voting_for_empire
						EMP = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = PEN.id }
						}
						set_country_flag = voting_for_pen
						PEN = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = EOH.id }
						}
						set_country_flag = voting_for_empire_of_hand
						EOH = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = FTU.id }
						}
						set_country_flag = voting_for_f_t_u
						FTU = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = ERI.id }
						}
						set_country_flag = voting_for_eri
						ERI = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = ZER.id }
						}
						set_country_flag = voting_zero_command
						ZER = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = REE.id }
						}
						set_country_flag = voting_for_kareenth
						REE = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = BES.id }
						}
						set_country_flag = voting_for_bespin
						BES = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = ZSJ.id }
						}
						set_country_flag = voting_for_zsinj
						ZSJ = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					if = {
						limit = {
							check_variable = { ROOT.selected_nation_var = RIN.id }
						}
						set_country_flag = voting_for_rin
						RIN = {
							add_to_variable = {voted_for_count_emp = 1}
						}
					}
					set_country_flag = voted_for_warlord
			}
		}
		
		triggers = {
			warlord_flag_click_enabled = {
				NOT = {
					check_variable = { Root.selected_country_voting = i }
				}
			}
			imperial_logo_click_enabled = {
				NOT = {
					check_variable = { Root.selected_country_voting = i }
				}
			}
		}
		properties = {
			warlord_flag = {
				image = "[This.GetFlag]"
			}
		}

		dynamic_lists = {
			warlord_voting_grid = {
				array = Global.imperial_warlords
				entry_container = imperial_voting_entry
				change_scope = yes
			}
		}
	}
	marshal_contanier_script = {
		context_type = player_context
		window_name = "marshal_container"
		parent_window_name = "Warlord_Screen"
		visible = {
           has_country_flag = marshal_open
		}
		effects = {
			marshal_icon_click = {
				if = {
					limit = {
						ROOT = {
							has_country_flag = emperor
						}
					}
					set_variable = { ROOT.marshal_selected_id = This.id}
					var:ROOT.marshal_selected_id = {
						country_event = {
						    id = emperor_deals.9
						    days = 5
						}
					}
				}
			}
		}
		properties = {
			marshal_icon = { image = "[get_Marshal_photo]" }
		}
		dynamic_lists = {
			marshal_grid = {
				array = Global.imperial_warlords
				entry_container = marshal_entry
				change_scope = yes
			}
		}
	}
}