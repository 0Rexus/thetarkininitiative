scripted_gui = {

	corporation_buy_market = {
		context_type = player_context
		window_name = "corporation_buy_market"
		visible = {
           has_country_flag = corp_buy
		}
		effects = {
			fighter_background_click = {
				ROOT = {
					set_variable = { selected_item = i }
					set_variable = { total_current_price = Global.imperial_fighters_price_per_unit_array^i }
					set_variable = { current_tag_selected =  Global.imperial_fighters_tag_array^i }
					set_variable = { calc_price = total_current_price }
					multiply_variable = { total_current_price = quantity_to_be_bought }
				}
			}
			higher_button_click = {
				add_to_variable = { quantity_to_be_bought = 100 }
				set_variable = { calc_price_math = calc_price }
				set_variable = { total_current_price = 0 }
				multiply_variable = { calc_price_math = quantity_to_be_bought }
				set_variable = { total_current_price = calc_price_math }
			}
			lower_button_click = {
				subtract_from_variable = { quantity_to_be_bought = 100 }
				set_variable = { calc_price_math = calc_price }
				set_variable = { total_current_price = 0 }
				multiply_variable = { calc_price_math = quantity_to_be_bought }
				set_variable = { total_current_price = calc_price_math }
			}
			overlay_click = {
				capital_scope = {
					ROOT = {
						goto_state = PREV
					}
				}
			}
			place_order_click = {
				subtract_from_variable = { currency_amount^primary_currency = total_current_price }
				var:current_tag_selected = {
					#add_to_variable = { currency_amount^primary_currency = PREV.total_current_price }
					add_to_variable = { current_contracts_value = PREV.total_current_price }
					add_to_array = { current_contracts_quantity = PREV.quantity_to_be_bought }
					add_to_array = { current_contracts_tag = PREV.id }
					add_to_array = { current_contracts_item = PREV.Global.imperial_fighters_array^i }
				}
			}
		}
		triggers = {
			fighter_background_click_enabled = {
				NOT = {
					check_variable = { Root.selected_item = i }
				}
			}
			lower_button_click_enabled = {
				check_variable = { quantity_to_be_bought > 0 }
			}
		}
		properties = {
			contract_background = {
				image = "[GetFighterBackground]"
			}
			contract_nation = {
				image = "[This.GetFlag]"
			}
			fighter_type = {
				image = "[GetFighterProduct]"
			}
		}
		dynamic_lists = {
			fighter_grid = {
				array = Global.imperial_fighters_tag_array
				entry_container = fighter_item_entry
				change_scope = yes
			}
		}
	}
	corporation_sell_market = {
		context_type = player_context
		window_name = "corporation_sell_market"
		visible = {
			has_country_flag = corp_sell
		}
		effects = {
			fighter_add_click = {
				add_to_array = { fighter_product_array = 0 }
			}
		}
		triggers = {
		}

		properties = {
			contract_nation = {
				image = "[?v.GetFlag]" 
				}
			item_button = {
				image = "[GetFighterProduct]" 
				}
			}
		dynamic_lists = {
			contract_grid = {
				array = current_contracts_tag
				entry_container = contract_item
				change_scope = yes
			}
		}
	}
	corp_product_market = {
		context_type = player_context
		window_name = "corp_product_market"
		visible = {
			has_country_flag = corp_product
		}
		effects = {
			efficiency_red_button_1_click = {

			}
			fighter_category_click = {
				set_country_flag = fighter_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = vehicle_select_category
				add_to_array = { product_dev_array = token:tie_fighter_airframe_0 }
			}
			ship_category_click = {
				set_country_flag = ship_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = fighter_select_category
				clr_country_flag = vehicle_select_category
			}
			vehicle_category_click = {
				set_country_flag = vehicle_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = fighter_select_category
			}
			droid_category_click = {
				set_country_flag = droid_select_category
				clr_country_flag = vehicle_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = fighter_select_category
			}
			product_item_select_click = {
				set_variable = { selected_item = ROOT }
			}
			research_button_click = {
				if = {
					limit = {
						has_country_flag = tie_fighter_selected
					}
					set_country_flag = {
						flag = tie_fighter_development
						days = 180
					}
					set_country_flag = tie_fighter_researched
				}
				if = {
					limit = {
						has_country_flag = tie_bomber_selected
					}
					set_country_flag = {
						flag = tie_bomber
						days = 180
					}
					set_country_flag = tie_bomber_researched
				}
			}
			flagship_button_click = {
				for_each_loop = {
					array = global.imperial_fighters_tag_array
					value = v
						if = {
							 limit = { tag = var:v }
						  remove_from_array = {
							array = Global.imperial_fighters_tag_array
							index = i
						}
						remove_from_array = {
							array = Global.imperial_fighters_array
							index = i
						}
						remove_from_array = {
							array = Global.imperial_fighters_price_per_unit_array
							index = i
						}
					}
				}
				if = {
					limit = {
						has_country_flag = tie_fighter_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 0 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_bomber_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 1 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_advanced_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 2 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_advanced_defender_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 3 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_defender_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 4 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_defender_gunner_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 5 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_heavy_bomber_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 6 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_interceptor_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 7 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_interceptor_2_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 8 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_punisher_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 9 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_specter_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 10 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_tiespecter_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 11 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
				if = {
					limit = {
						has_country_flag = tie_vanguard_selected
					}
					add_to_array = { Global.imperial_fighters_tag_array = ROOT.id }
					add_to_array = { Global.imperial_fighters_array = 12 }
					add_to_array = { Global.imperial_fighters_price_per_unit_array = actual_price }
				}
			}
			higher_button_product_click = {
				add_to_variable = { product_set_markup = 0.1 }
				set_variable = { actual_price = base_price }
				set_variable = { product_markup = product_set_markup }
				add_to_variable = { product_markup = 1 }
				multiply_variable = { actual_price = product_markup }
			}
			lower_button_product_click = {
				subtract_from_variable = { product_set_markup = 0.1 }
				set_variable = { actual_price = base_price }
				set_variable = { product_markup = product_set_markup }
				add_to_variable = { product_markup = 1 }
				multiply_variable = { actual_price = product_markup }
			}
		}
		triggers = {
			price_visible = {
				has_country_flag = not_developed
			}
			markup_visible = {
				NOT = {
					has_country_flag = not_developed
				}
			}
			lower_button_product_click_enabled = {
				check_variable = { actual_price > 1 }
			}
			efficiency_red_button_1_click_enabled = {
				check_variable = { efficiency_item > 0 }
			}
			efficiency_red_button_2_click_enabled = {
				check_variable = { efficiency_item > 1 }
			}
			efficiency_red_button_3_click_enabled = {
				check_variable = { efficiency_item > 2 }
			}
			efficiency_red_button_4_click_enabled = {
				check_variable = { efficiency_item > 3 }
			}
			efficiency_red_button_5_click_enabled = {
				check_variable = { efficiency_item > 4 }
			}
			quality_red_button_1_click_enabled = {
				check_variable = { quality_item > 0 }
			}
			quality_red_button_2_click_enabled = {
				check_variable = { quality_item > 1 }
			}
			quality_red_button_3_click_enabled = {
				check_variable = { quality_item > 2 }
			}
			quality_red_button_4_click_enabled = {
				check_variable = { quality_item > 3 }
			}
			quality_red_button_5_click_enabled = {
				check_variable = { quality_item > 4 }
			}
			fighter_category_click_enabled = {
				NOT = {
					has_country_flag = fighter_select_category
				}
			}
			ship_category_click_enabled = {
				NOT = {
					has_country_flag = ship_select_category
				}
			}
			vehicle_category_click_enabled = {
				NOT = {
					has_country_flag = vehicle_select_category
				}
			}
			droid_category_click_enabled = {
				NOT = {
					has_country_flag = droid_select_category
				}
			}
		}
		#dynamic_lists = {
		#	product_dev_grid = {
		#		array = product_dev_array
		#		entry_container = product_item_entry
		#		change_scope = yes
		#	}
		#}
		properties = {
			product_selected_imperial = {
				image = "[Getimperialfighter]" 
				}
			}
	}
	imperial_fighters = {
		context_type = player_context
		window_name = "imperial_fighters"
		parent_window_name = "corp_product_market"
		visible = {
			has_country_flag = fighter_select_category
		}
		effects = {
			tie_fighter_click = {
				set_variable = { base_price = 5 }
				set_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_bomber_click = {
				set_variable = { base_price = 7 }
				clr_country_flag = tie_fighter_selected
				set_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_advanced_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				set_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_advanced_defender_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				set_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_defender_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				set_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_defender_gunner_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				set_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_heavy_bomber_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				set_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_interceptor_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				set_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_interceptor_2_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				set_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_punisher_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				set_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_specter_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				set_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_tiespecter_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				set_country_flag = tie_tiespecter_selected
				clr_country_flag = tie_vanguard_selected
			}
			tie_vanguard_click = {
				set_variable = { base_price = 0 }
				clr_country_flag = tie_fighter_selected
				clr_country_flag = tie_bomber_selected
				clr_country_flag = tie_advanced_selected
				clr_country_flag = tie_advanced_defender_selected
				clr_country_flag = tie_defender_selected
				clr_country_flag = tie_defender_gunner_selected
				clr_country_flag = tie_heavy_bomber_selected
				clr_country_flag = tie_interceptor_selected
				clr_country_flag = tie_interceptor_2_selected
				clr_country_flag = tie_punisher_selected
				clr_country_flag = tie_specter_selected
				clr_country_flag = tie_tiespecter_selected
				set_country_flag = tie_vanguard_selected
			}
		}
		triggers = {
			tie_fighter_click_enabled = {
				NOT = {
					has_country_flag = tie_fighter_selected
				}
			}
			tie_bomber_click_enabled = {
				NOT = {
					has_country_flag = tie_bomber_selected
				}
			}
			tie_advanced_click_enabled = {
				NOT = {
					has_country_flag = tie_advanced_selected
				}
			}
			tie_advanced_defender_click_enabled = {
				NOT = {
					has_country_flag = tie_advanced_defender_selected
				}
			}
			tie_defender_click_enabled = {
				NOT = {
					has_country_flag = tie_defender_selected
				}
			}
			tie_defender_gunner_click_enabled = {
				NOT = {
					has_country_flag = tie_defender_gunner_selected
				}
			}
			tie_heavy_bomber_click_enabled = {
				NOT = {
					has_country_flag = tie_heavy_bomber_selected
				}
			}
			tie_interceptor_click_enabled = {
				NOT = {
					has_country_flag = tie_interceptor_selected
				}
			}
			tie_interceptor_2_click_enabled = {
				NOT = {
					has_country_flag = tie_interceptor_2_selected
				}
			}
			tie_punisher_click_enabled = {
				NOT = {
					has_country_flag = tie_punisher_selected
				}
			}
			tie_specter_click_enabled = {
				NOT = {
					has_country_flag = tie_specter_selected
				}
			}
			tie_tiespecter_click_enabled = {
				NOT = {
					has_country_flag = tie_tiespecter_selected
				}
			}
			tie_vanguard_click_enabled = {
				NOT = {
					has_country_flag = tie_vanguard_selected
				}
			}
		}
	}
}