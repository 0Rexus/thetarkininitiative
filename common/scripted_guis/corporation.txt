scripted_gui = {

	corporation_buy_market = {
		context_type = player_context
		window_name = "corporation_buy_market"
		visible = {
           has_country_flag = corp_buy
		}
		effects = {
			issue_order_click = {
				log ="quantity ordered: [?quantity_ordered]"
				ROOT = {
					if = {
						limit = {
							has_country_flag = fighter_select
						}
						add_to_array = { Global.gun_contract = ROOT.id }
						add_to_array = { Global.contract_quantity = quantity_ordered }
					}
				}
				add_political_power = 1
				log ="quantity ordered: [?quantity_ordered]"
			}
			buy_order_click = {
				add_to_array = { var:bid_array.active_fighter_contracts = ROOT.id }
				add_to_array = { var:bid_array.fighter_type_contract = ROOT.selected_fighter }
				add_to_array = { var:bid_array.fighter_contract_quantity = bid_array_delivery_quantity^i }
				add_to_variable = { var:bid_array.currency_amount^primary_currency = bid_array_price^i }
			}
			exit_button_click = {
				clear_array = bid_array
				clear_array = bid_array_price
				clear_array = bid_array_item
			}
			higher_button_click = {
				add_to_variable = { quantity_ordered = 100 }
			}
			lower_button_click = {
				subtract_from_variable = { quantity_ordered = 100 }
			}
			fighter_order_click = {
				set_country_flag = fighter_select
			}
			bid_item_background_click = {
				set_variable = { company_rating = var:bid_array.company_rating }
				set_variable = { ROOT.selected_bid = i }
				set_variable = { contract_tag = bid_array^selected_bid }
				set_variable = { company_rating = var:contract_tag.company_rating }
				if = {
					limit = {
						check_variable = { ROOT.bid_array_item^i = 0 }
					}
					set_variable = { ROOT.selected_fighter = 0 }
				}
				if = {
					limit = {
						check_variable = { ROOT.bid_array_item^i = 1 }
					}
					set_variable = { ROOT.selected_fighter = 1 }
				}
				if = {
					limit = {
						check_variable = { ROOT.bid_array_item^i = 2 }
					}
					set_variable = { ROOT.selected_fighter = 2 }
				}
			}
		}
		triggers = {
			fighter_order_click_enabled = {
				NOT = {
					has_country_flag = fighter_select
				}
			}
			bid_item_background_click_enabled = {
				NOT = {
					check_variable = { ROOT.selected_bid = i }
				}
			}
		}
		properties = {
			product_nation = {
				image = "[This.GetFlag]"
			}
			item_showcase = {
				image = "[GetFighterShowcase]"
			}
		}
		dynamic_lists = {
			bid_item_grid = {
				array = bid_array
				entry_container = bid_item
				change_scope = yes
			}
		}
	}
	corporation_sell_market = {
		context_type = player_context
		window_name = "corporation_sell_market"
		visible = {
			has_country_flag = corp_sell
		}
		effects = {
			exit_button_click = {
			}
			fighter_category_click = {
				set_country_flag = fighter_select_category
			}
			higher_button_corporate_factory_click = {
				add_to_variable = { corp_factory_used = 1 }
			}
			lower_button_corporate_factory_click = {
				subtract_from_variable = { corp_factory_used = 1 }
			}
			contract_background_click = {
				set_variable = { ROOT.selected_contract = i }
				set_variable = { ROOT.current_contract_quantity = i }
				set_variable = { ROOT.array_index = i }
				set_variable = { contract_quantity = Global.contract_quantity^i }
			}
			price_up_click = {
				add_to_variable = { contract_price = 100 }
			}
			send_contract_click = {
				add_political_power = 1
				set_variable = { contract_tag = Global.gun_contract^array_index }
				set_variable = { fighter_product_item = fighter_product_item }
				  var:contract_tag = {
					add_to_array = {
						array = bid_array
						value = ROOT.id
					}
					add_to_array = {
						array = bid_array_price
						value = PREV.product_price
					}
					add_to_array = {
						array = bid_array_delivery_quantity
						value = contract_quantity
					}
					add_to_array = {
						array = bid_array_item
						value = PREV.fighter_product_item
					}
				}
			}
			item_background_click = {

			}
			item_button_click = {
				set_variable = { ROOT.selected_product = i }
				if = {
					limit = {
						check_variable = { fighter_product_array^i = 0 }
					}
					set_country_flag = fighter_selected
					set_variable = { product_price = 100 }
					set_variable = { fighter_product_item = 0 }
				}
				if = {
					limit = {
						check_variable = { fighter_product_array^i = 1 }
					}
					set_country_flag = fighter_selected
					set_variable = { product_price = 120 }
					set_variable = { fighter_product_item = 1 }
				}
				if = {
					limit = {
						check_variable = { fighter_product_array^i = 2 }
					}
					set_country_flag = fighter_selected
					set_variable = { product_price = 150 }
					set_variable = { fighter_product_item = 2 }
				}
			}
			fighter_add_click = {
				clear_array = fighter_product_array
				add_to_array = { fighter_product_array = 0 }
				add_to_array = { fighter_product_array = 1 }
				add_to_array = { fighter_product_array = 2 }
			}
		}
		triggers = {
			contract_nation_click_enabled = {
				NOT = {
					check_variable = { ROOT.selected_contract = i }
				}
			}
			item_button_click_enabled = {
				NOT = {
					check_variable = { ROOT.selected_product = i }
				}
			}
			fighter_category_click_enabled = {
				NOT = {
					has_country_flag = fighter_select_category
				}
			}
			lower_button_corporate_factory_click_enabled = {
				NOT = {
					check_variable = { ROOT.corp_factory_used = 0 }
				}
			higher_button_corporate_factory_click_enabled = {
				NOT = {
					check_variable = { ROOT.corp_factory_used > total_corp_factories }
				}
			}
		}
		properties = {
			contract_nation = {
				image = "[This.GetFlag]" 
				}
			item_button = {
				image = "[GetFighterProduct]" 
				}
			}
		dynamic_lists = {
			contract_grid = {
				array = Global.gun_contract
				entry_container = contract_item
				change_scope = yes
			}
			contract_item_sell_grid = {
				array = fighter_product_array
				entry_container = product_item
				change_scope = no
			}
		}
	}
	corp_product_market = {
		context_type = player_context
		window_name = "corp_product_market"
		visible = {
			has_country_flag = corp_product
		}
		effects = {
			efficiency_red_button_1_click = {

			}
			fighter_category_click = {
				set_country_flag = fighter_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = vehicle_select_category
			}
			ship_category_click = {
				set_country_flag = ship_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = fighter_select_category
				clr_country_flag = vehicle_select_category
			}
			vehicle_category_click = {
				set_country_flag = vehicle_select_category
				clr_country_flag = droid_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = fighter_select_category
			}
			droid_category_click = {
				set_country_flag = droid_select_category
				clr_country_flag = vehicle_select_category
				clr_country_flag = ship_select_category
				clr_country_flag = fighter_select_category
			}
		}
		triggers = {
			efficiency_red_button_1_click_enabled = {
				check_variable = { efficiency_item > 0 }
			}
			efficiency_red_button_2_click_enabled = {
				check_variable = { efficiency_item > 1 }
			}
			efficiency_red_button_3_click_enabled = {
				check_variable = { efficiency_item > 2 }
			}
			efficiency_red_button_4_click_enabled = {
				check_variable = { efficiency_item > 3 }
			}
			efficiency_red_button_5_click_enabled = {
				check_variable = { efficiency_item > 4 }
			}
			quality_red_button_1_click_enabled = {
				check_variable = { quality_item > 0 }
			}
			quality_red_button_2_click_enabled = {
				check_variable = { quality_item > 1 }
			}
			quality_red_button_3_click_enabled = {
				check_variable = { quality_item > 2 }
			}
			quality_red_button_4_click_enabled = {
				check_variable = { quality_item > 3 }
			}
			quality_red_button_5_click_enabled = {
				check_variable = { quality_item > 4 }
			}
			fighter_category_click_enabled = {
				NOT = {
					has_country_flag = fighter_select_category
				}
			}
			ship_category_click_enabled = {
				NOT = {
					has_country_flag = ship_select_category
				}
			}
			vehicle_category_click_enabled = {
				NOT = {
					has_country_flag = vehicle_select_category
				}
			}
			droid_category_click_enabled = {
				NOT = {
					has_country_flag = droid_select_category
				}
			}
		}
	}
}