scripted_gui = {
	stock_screen = {
		context_type = player_context
		window_name = "stock_screen"
		visible = {
			has_government = corporation
			has_country_flag = stock_screen_open
		}

		effects = {
			ardees_click = {
				open_corpo_info = yes
				set_country_flag = ardees_beverage_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = ARD.id }
			}
			fretek_click = {
				open_corpo_info = yes
				set_country_flag = freitek_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = FTI.id }
			}
			galentro_click = {
				open_corpo_info = yes
				set_country_flag = galentro_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = JAE.id }
			}
			incom_click = {
				open_corpo_info = yes
				set_country_flag = incom_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = FRE.id }
			}
			merr_click = {
				open_corpo_info = yes
				set_country_flag = merr_sonn_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = MER.id }
			}
			millenium_click = {
				open_corpo_info = yes
				set_country_flag = millennium_entertainments_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = MEL.id }
			}
			rendili_click = {
				open_corpo_info = yes
				set_country_flag = rendili_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = REN.id }
			}
			sorosubb_click = {
				open_corpo_info = yes
				set_country_flag = sorosuub_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = SOR.id }
			}
			zaltin_click = {
				open_corpo_info = yes
				set_country_flag = zaltin_selected
				list_for_influencers_or_whatever = yes
				set_variable = { company_selected = ZAL.id }
			}
			arakyd_click = {
				open_corpo_info = yes
				set_country_flag = arakyd_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = ARA.id }
			}
			czerka_click = {
				open_corpo_info = yes
				set_country_flag = czerka_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = CZE.id }
			}
			industrial_click = {
				open_corpo_info = yes
				set_country_flag = industrial_automaton_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = IND.id }
			}
			karflo_click = {
				open_corpo_info = yes
				set_country_flag = karflo_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = KFC.id }
			}
			kuat_click = {
				open_corpo_info = yes
				set_country_flag = kuat_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = KUA.id }
			}
			sienar_click = {
				open_corpo_info = yes
				set_country_flag = sienar_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = SFS.id }
			}
			slayn_click = {
				open_corpo_info = yes
				set_country_flag = slayn_and_korpil_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = SLK.id }
			}
			taggeco_click = {
				open_corpo_info = yes
				set_country_flag = taggeco_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = TAG.id }
			}
			trilon_click = {
				open_corpo_info = yes
				set_country_flag = trilon_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = TRI.id }
			}
			ubrikkian_click = {
				open_corpo_info = yes
				set_country_flag = ubrikkian_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = UBK.id }
			}
			accutronics_click = {
				open_corpo_info = yes
				set_country_flag = accutronics_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = ACU.id }
			}
			ayelixe_click = {
				open_corpo_info = yes
				set_country_flag = ayelixe_krongbing_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = AKT.id }
			}
			bank_of_core_click = {
				open_corpo_info = yes
				set_country_flag = bank_of_the_core_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = BAN.id }
			}
			blastech_click = {
				open_corpo_info = yes
				set_country_flag = blastech_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = BIB.id }
			}
			dynamic_click = {
				open_corpo_info = yes
				set_country_flag = dynamic_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = BEX.id }
			}
			ibc_click = {
				open_corpo_info = yes
				set_country_flag = ibc_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = IBC.id }
			}
			cybot_click = {
				open_corpo_info = yes
				set_country_flag = cybot_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = CYB.id }
			}
			biotech_click = {
				open_corpo_info = yes
				set_country_flag = biotech_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = NEU.id }
			}
			chiewab_click = {
				open_corpo_info = yes
				set_country_flag = chiewab_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = CHI.id }
			}
			corellia_click = {
				open_corpo_info = yes
				set_country_flag = corellia_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = COR.id }
			}
			athakam_click = {
				open_corpo_info = yes
				set_country_flag = athakam_medtech_selected
				list_for_influencers_or_whatever = yes	
				set_variable = { company_selected = ATH.id }
			}
			_click = {
				open_corpo_info = yes
				set_country_flag = xucphra_selected
				list_for_influencers_or_whatever = yes	
			}
			
		}
		dynamic_lists = {
			subsidiary_grid = {
				array = subsidiary_array
				entry_container = subsidiary_entry
				change_scope = yes
			}
		}
	}
	stock_info_screen = {
		context_type = player_context
		window_name = "stock_info_screen"
		visible = {
			has_country_flag = stock_info_open
		}
		effects = {
			1_selected_click = {
				set_country_flag = stock_1_stock_selected
				clr_country_flag = stock_10_stock_selected
				clr_country_flag = stock_100_stock_selected
			}
			10_selected_click = {
				set_country_flag = stock_10_stock_selected
				clr_country_flag = stock_1_stock_selected
				clr_country_flag = stock_100_stock_selected
			}
			100_selected_click = {
				set_country_flag = stock_100_stock_selected
				clr_country_flag = stock_1_stock_selected
				clr_country_flag = stock_10_stock_selected
			}
			higher_button_click = {
				if = {
					limit = {
						has_country_flag = stock_1_stock_selected
					}
					add_to_variable = { shares_being_bought = 1 }
				}
				if = {
					limit = {
						has_country_flag = stock_10_stock_selected
					}
					add_to_variable = { shares_being_bought = 10 }
				}
				if = {
					limit = {
						has_country_flag = stock_100_stock_selected
					}
					add_to_variable = { shares_being_bought = 100 }
				}
			}
			lower_button_click = {
				if = {
					limit = {
						has_country_flag = stock_1_stock_selected
					}
					subtract_from_variable = { shares_being_bought = 1 }
				}
				if = {
					limit = {
						has_country_flag = stock_10_stock_selected
					}
					subtract_from_variable = { shares_being_bought = 10 }
				}
				if = {
					limit = {
						has_country_flag = stock_100_stock_selected
					}
					subtract_from_variable = { shares_being_bought = 100 }
				}
			}
			buy_shares_click = {
				subtract_from_variable = { company_selected:total_shares_available = shares_being_bought }
				ROOT = {
					subtract_from_variable = { dx = company_selected:share_price }
				}
				set_temp_variable = { share_quantity_calc = company_selected:outstanding_shares }
				set_temp_variable = { bought_shares_calc = shares_being_bought }
				divide_temp_variable = { bought_shares_calc = share_quantity_calc }
				set_temp_variable = { share_price_calc = company_selected:share_price }
				multiply_temp_variable = { share_price_calc = bought_shares_calc }
				add_to_variable = { company_selected:share_price = share_price_calc }
		
				if = {
					limit = {
						is_in_array = { company_selected:shares_country = THIS }
					}
					var:company_selected = {
						add_to_variable = { shares_amount@PREV = PREV.shares_being_bought }
						shares_update = yes
					}
				}
				else = {
					var:company_selected = {
						add_to_array = { shares_country = PREV }
						set_variable = { shares_amount@PREV = PREV.shares_being_bought }
						shares_update = yes
					}
				}
				#add_to_variable = { shares_held_@var:company_selected = shares_being_bought }
				#set_variable =  { share_percentage_@var:company_selected = shares_held_@var:company_selected }
				#divide_variable = { share_percentage_@var:company_selected = company_selected:outstanding_shares }
				#set_temp_variable = { share_owner_1 = share_owner_1@var:company_selected }
				#set_variable = { share_owner_1:share_percent = share_percentage_@var:company_selected }
				#if = {
				#  limit = {
				#	check_variable = { share_percentage@var:company_selected < share_owner_1:share_percent }
				#	}
				#	set_variable = { share_owner_1@var:company_selected = ROOT.id }
				#}
				shares_update = yes
				percent_calc_corp = yes
				set_variable = { shares_being_bought = 0 }
			}
			sell_shares_click = {
				meta_effect = {
					text = {
						subtract_from_variable = { shares_held_[Getcompanyname] = shares_being_bought }
						add_to_variable = { global.total_shares_available_[Getcompanyname] = shares_being_bought }
						ROOT = {
							add_to_variable = { dx = global.share_price_[Getcompanyname] }
						}
						set_temp_variable = { share_quantity_calc = global.outstanding_shares_[Getcompanyname] }
						divide_temp_variable = { shares_being_bought = share_quantity_calc }
						set_temp_variable = { share_price_calc = share_price_[Getcompanyname] }
						multiply_temp_variable = { share_price_calc = share_quantity_calc }
						subtract_from_variable = { share_price_[Getcompanyname] = share_price_calc }
						set_variable =  { share_percentage_[Getcompanyname] = shares_held_[Getcompanyname] }
						divide_variable = { share_percentage_[Getcompanyname] = global.outstanding_shares_[Getcompanyname] }
						set_variable = { global.share_owner_1_@var:company_selected = ROOT.id }
					}
					Getcompanyname = "[Getcompanyname]"
				}
				list_for_influencers_or_whatever = yes
				percent_calc_corp = yes
				set_variable = { shares_being_bought = 0 }
			}
			stock_split_click = {
				meta_effect = {
					text = {
							multiply_variable = { global.outstanding_shares_[Getcompanyname] = split_amount }
							divide_variable = { share_price_[Getcompanyname] = split_amount }
							every_country = { 
								ROOT = {
									multiply_variable = { shares_held_[Getcompanyname] = split_amount } 
								}
							}
						}
					Getcompanyname = "[Getcompanyname]"
				}
				list_for_influencers_or_whatever = yes
				percent_calc_corp = yes
			}
		}
		triggers = {
			1_selected_click_enabled = {
				NOT = {
					has_country_flag = stock_1_stock_selected
				}
			}
			10_selected_click_enabled = {
				NOT = {
					has_country_flag = stock_10_stock_selected
				}
			}
			100_selected_click_enabled = {
				NOT = {
					has_country_flag = stock_100_stock_selected
				}
			}
		}
	}
}