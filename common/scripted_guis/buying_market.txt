scripted_gui = {
    Marketplace_main_selection = {
        context_type = player_context
        window_name = "Marketplace_buying_menu"
        visible = {
            check_variable = { open_market_click = 2}
        }
        effects = {
            select_ground_forces_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_ground_forces
            }
            select_starfighters_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = starfighters_buying_market_open
            }
            select_ships_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_ships
            }
            select_droids_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_droids
            }
            select_mercs_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_mercs
            }
            select_medical_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_medical
            }
            select_entertainment_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_entertainment
            }
            select_resource_extraction_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_resource_extraction
            }
            select_raw_goods_click = {
                erase_previous_buying_market_selection = yes
                set_country_flag = open_market_raw_goods
            }
            select_republic_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = republic_market_open
            }
            select_neutral_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = neutral_market_open
            }
            select_imperial_button_click = {
                erase_previous_ship_menu_faction_selection = yes
                set_country_flag = imperial_market_open
            }
            move_up_button_click = {
                if = {
                    limit  = {
                        has_country_flag =  open_first_tab_lazy
                    }
                    clr_country_flag = open_first_tab_lazy
                    set_country_flag = open_second_tab_lazy
                }else_if = {
                    limit  = {
                        has_country_flag =  open_second_tab_lazy
                    }
                    clr_country_flag = open_second_tab_lazy
                    set_country_flag = open_third_tab_lazy
                }
            }
            move_down_button_click = {
                if = {
                    limit  = {
                        has_country_flag =  open_third_tab_lazy
                    }
                    clr_country_flag = open_third_tab_lazy
                    set_country_flag = open_second_tab_lazy
                }else_if = {
                    limit  = {
                        has_country_flag =  open_second_tab_lazy
                    }
                    clr_country_flag = open_second_tab_lazy
                    set_country_flag = open_first_tab_lazy
                }
            }
        }
        triggers = {
            move_up_button_visible = {
                NOT = {
                    has_country_flag = open_third_tab_lazy
                }
            }
            move_down_button_visible = {
                NOT = {
                    has_country_flag = open_first_tab_lazy
                }
            }
            select_ground_forces_click_enabled = {
                NOT = {
                    has_country_flag = open_market_ground_forces
                }
            }
            select_ships_click_enabled = {
                NOT = {
                  has_country_flag = open_market_ships
                }
            }
            select_starfighters_click_enabled = {
                NOT = {
                    has_country_flag = starfighters_buying_market_open
                }
            }
            select_droids_click_enabled = {
                NOT = {
                    has_country_flag = open_market_droids
                }
            }
            select_republic_button_click_enabled = {
                NOT = {
                    has_country_flag = republic_market_open
                }
            }
            select_neutral_button_click_enabled = {
                NOT = {
                    has_country_flag = neutral_market_open
                }
            }
            select_imperial_button_click_enabled = {
                NOT = {
                    has_country_flag = imperial_market_open
                }
            }
        }
    }
    Marketplace_buying_ships_main = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_ships"
        visible = {
            has_country_flag = open_buy_market
            has_country_flag = open_market_ships
        }
        effects = {
            select_corvettes_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = corvette_buying_market_open
            }
            select_frigates_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = frigate_buying_market_open
            }
            select_cruisers_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = cruiser_buying_market_open
            }
            select_star_destroyers_button_click = {
                erase_previous_ship_menu_selection = yes
                set_country_flag = star_destroyer_buying_market_open
            }
        }
        triggers = {
            select_corvettes_button_click_enabled = {
                NOT = {
                    has_country_flag = corvette_buying_market_open
                }
            }
            select_frigates_button_click_enabled = {
                NOT = {
                    has_country_flag = frigate_buying_market_open
                }
            }
            select_cruisers_button_click_enabled = {
                NOT = {
                    has_country_flag = cruiser_buying_market_open
                }
            }
            select_star_destroyers_button_click_enabled = {
                NOT = {
                    has_country_flag = star_destroyer_buying_market_open
                }
            }
        }
    }
    Marketplace_buying_corvettes_republic_menu = {
        context_type = player_context
        parent_window_name = "Marketplace_buying_menu"
        window_name = "Marketplace_buying_corvettes_republic_menu"
        visible = {
            has_country_flag = open_market_ships
            has_country_flag = republic_market_open
            has_country_flag = corvette_buying_market_open
        }
        effects = {
            product_buy_one_913_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@913 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = cr70
                            equipment_variant = "CR70"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = cr70
                            equipment_variant = "CR70"
                            creator = var:global.cr70_holder
                        }
                    }
                }
            }
            product_auto_buy_913_click = {
                set_country_flag = auto_buy_enabled_913
            }
            product_buy_one_990_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@990 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = cr70_2
                            equipment_variant = "CR70 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = cr70_2
                            equipment_variant = "CR70 2"
                            creator = var:global.cr70_2_holder
                        }
                    }
                }
            }
            product_auto_buy_990_click = {
                set_country_flag = auto_buy_enabled_990
            }
            product_buy_one_1530_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@1530 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = warrior
                            equipment_variant = "Warrior"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = warrior
                            equipment_variant = "Warrior"
                            creator = var:global.warrior_holder
                        }
                    }
                }
            }
            product_auto_buy_1530_click = {
                set_country_flag = auto_buy_enabled_1530
            }
            ###AAA###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_990_visible = {
                has_country_flag = auto_buy_enabled_990
                auto_buy_enabled_990
            }
            
            auto_buy_display_1530_visible = {
                has_country_flag = auto_buy_enabled_1530

            }
        }
    }
    Marketplace_buying_corvettes_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_corvettes_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
            has_country_flag = corvette_buying_market_open
        }
        effects = {
            product_buy_one_950_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@950 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = ipv_1
                            equipment_variant = "IPV 1"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = ipv_1
                            equipment_variant = "IPV 1"
                            creator = var:global.ipv_1_holder
                        }
                    }
                }
            }
            product_auto_buy_950_click = {
                set_country_flag = auto_buy_enabled_950
            }
            product_buy_one_1260_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@1260 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = gozanti
                            equipment_variant = "Gozanti"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = gozanti
                            equipment_variant = "Gozanti"
                            creator = var:global.gozanti_holder
                        }
                    }
                }
            }
            product_auto_buy_1260_click = {
                set_country_flag = auto_buy_enabled_1260
            }
            product_buy_one_1925_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@1925 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = raider
                            equipment_variant = "Raider"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = raider
                            equipment_variant = "Raider"
                            creator = var:global.raider_holder
                        }
                    }
                }
            }
            product_auto_buy_1925_click = {
                set_country_flag = auto_buy_enabled_1925
            }
            product_buy_one_1990_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@1990 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = raider_2
                            equipment_variant = "Raider 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = raider_2
                            equipment_variant = "Raider 2"
                            creator = var:global.raider_2_holder
                        }
                    }
                }
            }
            product_auto_buy_1990_click = {
                set_country_flag = auto_buy_enabled_1990
            }
            ###AAB###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_950_visible = {
                has_country_flag = auto_buy_enabled_950

            }
            auto_buy_display_1260_visible = {
                has_country_flag = auto_buy_enabled_1260

            }
            auto_buy_display_1925_visible = {
                has_country_flag = auto_buy_enabled_1925

            }
            auto_buy_display_1990_visible = {
                has_country_flag = auto_buy_enabled_1990

            }
        }
    }
    Marketplace_buying_corvettes_neutral_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_corvettes_neutral_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = neutral_market_open
            has_country_flag = corvette_buying_market_open
        }
        effects = {
            ###ABB###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
    }
    Marketplace_buying_frigates_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_frigates_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
            has_country_flag = frigate_buying_market_open
        }
        effects = {
            product_buy_one_3200_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@3200 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = pelta
                            equipment_variant = "Pelta"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = pelta
                            equipment_variant = "Pelta"
                            creator = var:global.pelta_holder
                        }
                    }
                }
            }
            product_auto_buy_3200_click = {
                if = {
                    limit = {
                        has_country_flag = auto_buy_enabled_3200
                    }
                    clr_country_flag = auto_buy_enabled_3200
                }else = {
                    set_country_flag = auto_buy_enabled_3200
                }
            }
            product_buy_one_4262_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@4262 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = mc30
                            equipment_variant = "MC30"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = mc30
                            equipment_variant = "MC30"
                            creator = var:global.mc30_holder
                        }
                    }
                }
            }
            product_auto_buy_4262_click = {
                set_country_flag = auto_buy_enabled_4262
            }
            product_buy_one_2829_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@2829 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = nebulon
                            equipment_variant = "Nebulon"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = nebulon
                            equipment_variant = "Nebulon"
                            creator = var:global.nebulon_holder
                        }
                    }
                }
            }
            product_auto_buy_2829_click = {
                set_country_flag = auto_buy_enabled_2829
            }
            product_buy_one_2943_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@2943 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = nebulon_2
                            equipment_variant = "Nebulon 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = nebulon_2
                            equipment_variant = "Nebulon 2"
                            creator = var:global.nebulon_2_holder
                        }
                    }
                }
            }
            product_auto_buy_2943_click = {
                set_country_flag = auto_buy_enabled_2943
            }
            product_buy_one_2980_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@2980 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = corona
                            equipment_variant = "Corona"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = corona
                            equipment_variant = "Corona"
                            creator = var:global.corona_holder
                        }
                    }
                }
            }
            product_auto_buy_2980_click = {
                set_country_flag = auto_buy_enabled_2980
            }
            product_buy_one_4300_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@4300 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = quaser
                            equipment_variant = "Quaser"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = quaser
                            equipment_variant = "Quaser"
                            creator = var:global.quaser_holder
                        }
                    }
                }
            }
            product_auto_buy_4300_click = {
                set_country_flag = auto_buy_enabled_4300
            }
            product_buy_one_4430_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@4430 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = quaser_2
                            equipment_variant = "Quaser 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = quaser_2
                            equipment_variant = "Quaser 2"
                            creator = var:global.quaser_2_holder
                        }
                    }
                }
            }
            product_auto_buy_4430_click = {
                set_country_flag = auto_buy_enabled_4430
            }
            ###BBB###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        limit = {
            triggers = {
                auto_buy_display_3200_visible = {
                has_country_flag = auto_buy_enabled_3200

                }
                auto_buy_display_4262_visible = {
                has_country_flag = auto_buy_enabled_4262

                }
                auto_buy_display_2829_visible = {
                has_country_flag = auto_buy_enabled_2829

                }
                auto_buy_display_2943_visible = {
                has_country_flag = auto_buy_enabled_2943

                }
                auto_buy_display_4300_visible = {
                has_country_flag = auto_buy_enabled_4300

                }
                auto_buy_display_4430_visible = {
                has_country_flag = auto_buy_enabled_4430

                }
            }
        }
    }
    Marketplace_buying_frigates_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_frigates_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
            has_country_flag = frigate_buying_market_open
        }
        effects = {
            product_buy_one_2700_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@2700 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = lancer
                            equipment_variant = "Lancer"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = lancer
                            equipment_variant = "Lancer"
                            creator = var:global.lancer_holder
                        }
                    }
                }
            }
            product_auto_buy_2700_click = {
                set_country_flag = auto_buy_enabled_2700
            }
            ###BBC###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_2700_visible = {
                has_country_flag = auto_buy_enabled_2700

            }
        }
    }
    Marketplace_buying_frigates_neutral_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_frigates_neutral_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = neutral_market_open
            has_country_flag = frigate_buying_market_open
        }
        effects = {
            ###BCC###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
    }
    Marketplace_buying_cruisers_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_cruisers_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
            has_country_flag = cruiser_buying_market_open
        }
        effects = {
            product_buy_one_5421_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@5421 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = assaut
                            equipment_variant = "Assaut"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = assaut
                            equipment_variant = "Assaut"
                            creator = var:global.assaut_holder
                        }
                    }
                }
            }
            product_auto_buy_5421_click = {
                set_country_flag = auto_buy_enabled_5421
            }
            product_buy_one_5600_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@5600 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = assault_2
                            equipment_variant = "Assault 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = assault_2
                            equipment_variant = "Assault 2"
                            creator = var:global.assault_2_holder
                        }
                    }
                }
            }
            product_auto_buy_5600_click = {
                set_country_flag = auto_buy_enabled_5600
            }
            product_buy_one_7340_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@7340 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = bothan_assault
                            equipment_variant = "Bothan Assault"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = bothan_assault
                            equipment_variant = "Bothan Assault"
                            creator = var:global.bothan_assault_holder
                        }
                    }
                }
            }
            product_auto_buy_7340_click = {
                set_country_flag = auto_buy_enabled_7340
            }
            product_buy_one_5830_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@5830 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = mc40
                            equipment_variant = "MC40"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = mc40
                            equipment_variant = "MC40"
                            creator = var:global.mc40_holder
                        }
                    }
                }
            }
            product_auto_buy_5830_click = {
                set_country_flag = auto_buy_enabled_5830
            }
            ###CCC###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_5421_visible = {
                has_country_flag = auto_buy_enabled_5421

            }
            auto_buy_display_5600_visible = {
                has_country_flag = auto_buy_enabled_5600

            }
            auto_buy_display_5830_visible = {
                has_country_flag = auto_buy_enabled_5830

            }
        }
    }
    Marketplace_buying_cruisers_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_cruisers_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
            has_country_flag = cruiser_buying_market_open
        }
        effects = {
            product_buy_one_4800_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@4800 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = arquitens
                            equipment_variant = "Arquitens"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = arquitens
                            equipment_variant = "Arquitens"
                            creator = var:global.arquitens_holder
                        }
                    }
                }
            }
            product_auto_buy_4800_click = {
                set_country_flag = auto_buy_enabled_4800
            }
            product_buy_one_5950_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@5950 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = interdictor
                            equipment_variant = "interdictor"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = interdictor
                            equipment_variant = "interdictor"
                            creator = var:global.interdictor_holder
                        }
                    }
                }
            }
            product_auto_buy_5950_click = {
                set_country_flag = auto_buy_enabled_5950
            }
            product_buy_one_5200_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@5200 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = dreadnaught
                            equipment_variant = "Dreadnaught"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = dreadnaught
                            equipment_variant = "Dreadnaught"
                            creator = var:global.dreadnaught_holder
                        }
                    }
                }
            }
            product_auto_buy_5200_click = {
                set_country_flag = auto_buy_enabled_5200
            }
            product_buy_one_7400_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@7400 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = victory
                            equipment_variant = "Victory"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = victory
                            equipment_variant = "Victory"
                            creator = var:global.victory_holder
                        }
                    }
                }
            }
            product_auto_buy_7400_click = {
                set_country_flag = auto_buy_enabled_7400
            }
            product_buy_one_7940_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@7940 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = victory_2
                            equipment_variant = "Victory 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = victory_2
                            equipment_variant = "Victory 2"
                            creator = var:global.victory_2_holder
                        }
                    }
                }
            }
            product_auto_buy_7940_click = {
                set_country_flag = auto_buy_enabled_7940
            }
            ###CCD###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_4800_visible = {
                has_country_flag = auto_buy_enabled_4800

            }
            auto_buy_display_5950_visible = {
                has_country_flag = auto_buy_enabled_5950

            }
            auto_buy_display_5200_visible = {
                has_country_flag = auto_buy_enabled_5200

            }
            auto_buy_display_7400_visible = {
                has_country_flag = auto_buy_enabled_7400

            }
            auto_buy_display_7940_visible = {
                has_country_flag = auto_buy_enabled_7940

            }
        }
    }
    Marketplace_buying_cruisers_neutral_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_cruisers_neutral_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = neutral_market_open
            has_country_flag = cruiser_buying_market_open
        }
        effects = {
            ###CDD###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
    }
    Marketplace_buying_star_destoyers_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_star_destoyers_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = open_market_ships
            has_country_flag = star_destroyer_buying_market_open
        }
        effects = {
            product_buy_one_10080_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@10080 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = mc80_liberty
                            equipment_variant = "MC80 Liberty"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = mc80_liberty
                            equipment_variant = "MC80 Liberty"
                            creator = var:global.mc80_liberty_holder
                        }
                    }
                }
            }
            product_auto_buy_10080_click = {
                set_country_flag = auto_buy_enabled_10080
            }
            product_buy_one_12400_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@12400 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = starhawk
                            equipment_variant = "Starhawk"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = starhawk
                            equipment_variant = "Starhawk"
                            creator = var:global.starhawk_holder
                        }
                    }
                }
            }
            product_auto_buy_12400_click = {
                set_country_flag = auto_buy_enabled_12400
            }
            product_buy_one_9120_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@9120 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = mc75
                            equipment_variant = "MC75"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = mc75
                            equipment_variant = "MC75"
                            creator = var:global.mc75_holder
                        }
                    }
                }
            }
            product_auto_buy_9120_click = {
                set_country_flag = auto_buy_enabled_9120
            }
            product_buy_one_13450_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@13450 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = dauntless
                            equipment_variant = "Dauntless"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = dauntless
                            equipment_variant = "Dauntless"
                            creator = var:global.dauntless_holder
                        }
                    }
                }
            }
            product_auto_buy_13450_click = {
                set_country_flag = auto_buy_enabled_13450
            }
            product_buy_one_13200_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@13200 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = mc80_home_one
                            equipment_variant = "MC80 Home One"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = mc80_home_one
                            equipment_variant = "MC80 Home One"
                            creator = var:global.mc80_home_one_holder
                        }
                    }
                }
            }
            product_auto_buy_13200_click = {
                set_country_flag = auto_buy_enabled_13200
            }
            product_buy_one_10630_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@10630 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = mc85
                            equipment_variant = "MC85"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = mc85
                            equipment_variant = "MC85"
                            creator = var:global.mc85_holder
                        }
                    }
                }
            }
            product_auto_buy_10630_click = {
                set_country_flag = auto_buy_enabled_10630
            }
            product_buy_one_14400_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@14400 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = nebula
                            equipment_variant = "Nebula"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = nebula
                            equipment_variant = "Nebula"
                            creator = var:global.nebula_holder
                        }
                    }
                }
            }
            product_auto_buy_14400_click = {
                set_country_flag = auto_buy_enabled_14400
            }
            product_variant_type_14400 = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@14400 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = nebula_variant
                            equipment_variant = "Nebula"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = nebula_variant
                            equipment_variant = "Nebula"
                            creator = var:global.nebula_holder
                        }
                    }
                }
            }
            product_buy_one_13430_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@13430 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = republic_star
                            equipment_variant = "Republic star"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = republic_star
                            equipment_variant = "Republic star"
                            creator = var:global.republic_star_holder
                        }
                    }
                }
            }
            product_auto_buy_13430_click = {
                set_country_flag = auto_buy_enabled_13430
            }
            ###DDD###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_10080_visible = {
                has_country_flag = auto_buy_enabled_10080

            }
            auto_buy_display_12400_visible = {
                has_country_flag = auto_buy_enabled_12400

            }
            auto_buy_display_9120_visible = {
                has_country_flag = auto_buy_enabled_9120

            }
            auto_buy_display_13450_visible = {
                has_country_flag = auto_buy_enabled_13450

            }
            auto_buy_display_13200_visible = {
                has_country_flag = auto_buy_enabled_13200

            }
            auto_buy_display_10630_visible = {
                has_country_flag = auto_buy_enabled_10630

            }
            auto_buy_display_14400_visible = {
                has_country_flag = auto_buy_enabled_14400

            }
            auto_buy_display_13430_visible = {
                has_country_flag = auto_buy_enabled_13430

            }
        }
    }
    Marketplace_buying_star_destoyers_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_star_destoyers_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ships
            has_country_flag = star_destroyer_buying_market_open
        }
        effects = {
            product_buy_one_11005_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@11005 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = isd
                            equipment_variant = "ISD"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = isd
                            equipment_variant = "ISD"
                            creator = var:global.isd_holder
                        }
                    }
                }
            }
            product_auto_buy_11005_click = {
                set_country_flag = auto_buy_enabled_11005
            }
            product_variant_type_11005 = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@11005 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = isd_variant
                            equipment_variant = "ISD"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = isd_variant
                            equipment_variant = "ISD"
                            creator = var:global.isd_holder
                        }
                    }
                }
            }
            product_buy_one_11850_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@11850 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = isd_2
                            equipment_variant = "ISD 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = isd_2
                            equipment_variant = "ISD 2"
                            creator = var:global.isd_2_holder
                        }
                    }
                }
            }
            product_auto_buy_11850_click = {
                set_country_flag = auto_buy_enabled_11850
            }
            product_variant_type_11005 = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@11850 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = isd_2_variant
                            equipment_variant = "ISD 2"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = isd_2_variant
                            equipment_variant = "ISD 2"
                            creator = var:global.isd_2_holder
                        }
                    }
                }
            }
            product_buy_one_14503_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@14503 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = resurgent
                            equipment_variant = "Resurgent"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = resurgent
                            equipment_variant = "Resurgent"
                            creator = var:global.resurgent_holder
                        }
                    }
                }
            }
            product_auto_buy_14503_click = {
                set_country_flag = auto_buy_enabled_14503
            }
            product_buy_one_14030_click = {
                if = {
                    limit = {
                        check_variable = {global.market_ship_holder@14030 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        create_ship = {
                            type = praetor
                            equipment_variant = "Praetor"
                            creator = EMP
                        }
                    }else = {
                        create_ship = {
                            type = praetor
                            equipment_variant = "Praetor"
                            creator = var:global.praetor_holder
                        }
                    }
                }
            }
            product_auto_buy_14030_click = {
                set_country_flag = auto_buy_enabled_14030
            }
            ###DDE###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
        triggers = {
            auto_buy_display_11005_visible = {
                has_country_flag = auto_buy_enabled_11005

            }
            auto_buy_display_11850_visible = {
                has_country_flag = auto_buy_enabled_11850

            }
            auto_buy_display_14503_visible = {
                has_country_flag = auto_buy_enabled_14503

            }
            auto_buy_display_14030 ={

            }
        }
    }
    Marketplace_buying_star_destoyers_neutral_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_star_destoyers_neutral_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = neutral_market_open
            has_country_flag = star_destroyer_buying_market_open
        }
        effects = {
            ###DEE###
            ## ABOVE COMMENT IS FOR PYTHON SCRIPT DO NOT REMOVE ##
        }
    }

    ################ STARSHIPS #################################################################
    Marketplace_buying_fighters_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_fighters_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = starfighters_buying_market_open
            has_country_flag = open_first_tab_lazy
        }
        effects = {
            product_buy_one_e_wing_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@2 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = e_wing_airframe_0
                            amount = 100
                            variant_name = "e_wing"
                        }
                    }else = {
                        add_equipment_to_stockpile = {
                            producer = var:global.e_wing_holder
                            type = e_wing_airframe_0
                            amount = 100
                            variant_name = "e_wing"
                        }
                    }
                }
            }
            product_auto_buy_e_wing_click = {
                set_country_flag = auto_buy_enabled_e_wing
            }
            product_buy_one_a_wing_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@0 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        if = {
                            limit = {
                                has_country_flag = level_0_a_wing_active
                                check_variable = {global.market_starfighter_holder@3 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = EMP
                                type = a_wing_airframe_0
                                amount = 100
                                variant_name = "a_wing V1"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_1_a_wing_active
                                check_variable = {global.market_starfighter_holder@4 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = emp
                                type = a_wing_airframe_1
                                amount = 100
                                variant_name = "a_wing V2"
                            }
                        }
                    }else = {
                        if = {
                            limit = {
                                has_country_flag = level_0_a_wing_active
                                check_variable = {global.market_starfighter_holder@3 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.a_wing_holder
                                type = a_wing_airframe_0
                                amount = 100
                                variant_name = "a_wing V1"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_1_a_wing_active
                                check_variable = {global.market_starfighter_holder@4 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.a_wing_holder
                                type = a_wing_airframe_1
                                amount = 100
                                variant_name = "a_wing V2"
                            }
                        }
                    }
                }
            }
            product_auto_buy_a_wing_click = {
                set_country_flag = auto_buy_enabled_a_wing
            }
            level_0_a_wing_click = {
                set_country_flag = level_0_a_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_1_a_wing_active
                    }
                    clr_country_flag = level_1_a_wing_active
                }
            }
            level_1_a_wing_click = {
                set_country_flag = level_1_a_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_0_a_wing_active
                    }
                    clr_country_flag = level_0_a_wing_active
                }
            }
            product_buy_one_k_wing_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@5 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = k_wing_airframe_0
                            amount = 100
                            variant_name = "k_wing"
                        }
                    }else = {
                        add_equipment_to_stockpile = {
                            producer = var:global.k_wing_holder
                            type = k_wing_airframe_0
                            amount = 100
                            variant_name = "k_wing"
                        }
                    }
                }
            }
            product_auto_buy_k_wing_click = {
                set_country_flag = auto_buy_enabled_k_wing
            }
            product_buy_one_x_wing_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_x_wing_active
                            check_variable = {global.market_starfighter_holder@6 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = x_wing_airframe_0
                            amount = 100
                            variant_name = "x_wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_x_wing_active
                            check_variable = {global.market_starfighter_holder@7 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = x_wing_airframe_1
                            amount = 100
                            variant_name = "x_wing V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_x_wing_active
                            check_variable = {global.market_starfighter_holder@8 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = x_wing_airframe_2
                            amount = 100
                            variant_name = "x_wing V3"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_x_wing_active
                            check_variable = {global.market_starfighter_holder@6 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.x_wing_holder
                            type = x_wing_airframe_0
                            amount = 100
                            variant_name = "x_wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_x_wing_active
                            check_variable = {global.market_starfighter_holder@7 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.x_wing_holder
                            type = x_wing_airframe_1
                            amount = 100
                            variant_name = "x_wing V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_x_wing_active
                            check_variable = {global.market_starfighter_holder@8 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.x_wing_holder
                            type = x_wing_airframe_2
                            amount = 100
                            variant_name = "x_wing V3"
                        }
                    }
                }
            }
            product_auto_buy_x_wing_click = {
                set_country_flag = auto_buy_enabled_x_wing
            }
            level_0_x_wing_click = {
                set_country_flag = level_0_x_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_1_x_wing_active
                    }
                    clr_country_flag = level_1_x_wing_active
                }
            }
            level_1_x_wing_click = {
                set_country_flag = level_1_x_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_0_x_wing_active
                    }
                    clr_country_flag = level_0_x_wing_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_x_wing_active
                    }
                    clr_country_flag = level_2_x_wing_active
                }
            }
            level_2_x_wing_click = {
                set_country_flag = level_2_x_wing_active
                if = {
                    limit = {
                        has_country_flag = level_0_x_wing_active
                    }
                    clr_country_flag = level_0_x_wing_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_x_wing_active
                    }
                    clr_country_flag = level_1_x_wing_active
                }
            }
            product_buy_one_y_wing_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_y_wing_active
                            check_variable = {global.market_starfighter_holder@9 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = y_wing_airframe_0
                            amount = 100
                            variant_name = "y_wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_y_wing_active
                            check_variable = {global.market_starfighter_holder@10 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = y_wing_airframe_1
                            amount = 100
                            variant_name = "y_wing V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_y_wing_active
                            check_variable = {global.market_starfighter_holder@9 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.y_wing_holder
                            type = y_wing_airframe_0
                            amount = 100
                            variant_name = "y_wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_y_wing_active
                            check_variable = {global.market_starfighter_holder@10 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.y_wing_holder
                            type = y_wing_airframe_1
                            amount = 100
                            variant_name = "y_wing V2"
                        }
                    }
                }
            }
            product_auto_buy_y_wing_click = {
                set_country_flag = auto_buy_enabled_y_wing
            }
            level_0_y_wing_click = {
                set_country_flag = level_0_y_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_1_y_wing_active
                    }
                    clr_country_flag = level_1_y_wing_active
                }
            }
            level_1_y_wing_click = {
                set_country_flag = level_1_y_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_0_y_wing_active
                    }
                    clr_country_flag = level_0_y_wing_active
                }
            }
            product_buy_one_b_wing_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_b_wing_active
                            check_variable = {global.market_starfighter_holder@11 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = b_wing_airframe_0
                            amount = 100
                            variant_name = "b_wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_b_wing_active
                            check_variable = {global.market_starfighter_holder@12 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = b_wing_airframe_1
                            amount = 100
                            variant_name = "b_wing V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_b_wing_active
                            check_variable = {global.market_starfighter_holder@11 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.b_wing_holder
                            type = b_wing_airframe_0
                            amount = 100
                            variant_name = "b_wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_b_wing_active
                            check_variable = {global.market_starfighter_holder@12 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.b_wing_holder
                            type = b_wing_airframe_1
                            amount = 100
                            variant_name = "b_wing V2"
                        }
                    }
                }
            }
            product_auto_buy_b_wing_click = {
                set_country_flag = auto_buy_enabled_b_wing
            }
            level_0_b_wing_click = {
                set_country_flag = level_0_b_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_1_b_wing_active
                    }
                    clr_country_flag = level_1_b_wing_active
                }
            }
            level_1_b_wing_click = {
                set_country_flag = level_1_b_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_0_b_wing_active
                    }
                    clr_country_flag = level_0_b_wing_active
                }
            }
        }
        triggers = {
            auto_buy_display_e_wing_visible = {
                has_country_flag = auto_buy_enabled_e_wing

            }
            auto_buy_display_a_wing_visible = {
                has_country_flag = auto_buy_enabled_a_wing

            }
            auto_buy_display_k_wing_visible = {
                has_country_flag = auto_buy_enabled_k_wing

            }
            auto_buy_display_x_wing_visible = {
                has_country_flag = auto_buy_enabled_x_wing

            }
            auto_buy_display_y_wing_visible = {
                has_country_flag = auto_buy_enabled_y_wing

            }
            auto_buy_display_b_wing_visible = {
                has_country_flag = auto_buy_enabled_b_wing

            }
            product_price_u_wing_visible = {
                has_country_flag = level_0_u_wing_active
            }
            product_price_level_2_u_wing_visible = {
                has_country_flag = level_1_u_wing_active
            }
            product_price_a_wing_visible = {
                has_country_flag = level_0_a_wing_active
            }
            product_price_level_2_a_wing_visible = {
                has_country_flag = level_1_a_wing_active
            }
            product_price_x_wing_visible = {
                has_country_flag = level_0_x_wing_active
            }
            product_price_level_2_x_wing_visible = {
                has_country_flag = level_1_x_wing_active
            }
            product_price_level_3_x_wing_visible = {
                has_country_flag = level_2_x_wing_active
            }
            product_price_y_wing_visible = {
                has_country_flag = level_0_y_wing_active
            }
            product_price_level_2_y_wing_visible = {
                has_country_flag = level_1_y_wing_active
            }
            product_price_b_wing_visible = {
                has_country_flag = level_0_b_wing_active
            }
            product_price_level_2_b_wing_visible = {
                has_country_flag = level_1_b_wing_active
            }
            level_0_u_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_0_u_wing_active
                }
            }
            level_1_u_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_1_u_wing_active
                }
            }
            level_0_a_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_0_a_wing_active
                }
            }
            level_1_a_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_1_a_wing_active
                }
            }
            level_0_x_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_0_x_wing_active
                }
            }
            level_1_x_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_1_x_wing_active
                }
            }
            level_3_x_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_3_x_wing_active
                }
            }
            level_0_y_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_0_y_wing_active
                }
            }
            level_1_y_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_1_y_wing_active
                }
            }
            level_0_b_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_0_b_wing_active
                }
            }
            level_1_b_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_1_b_wing_active
                }
            }
        }
    }
    Marketplace_buying_fighters_2_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_fighters_2_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = starfighters_buying_market_open
            has_country_flag = open_second_tab_lazy
        }
        effects = {
            product_buy_one_u_wing_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_u_wing_active
                            check_variable = {global.market_starfighter_holder@0 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = u_wing_airframe_0
                            amount = 100
                            variant_name = "U Wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_u_wing_active
                            check_variable = {global.market_starfighter_holder@1 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = u_wing_airframe_1
                            amount = 100
                            variant_name = "U Wing V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_u_wing_active
                            check_variable = {global.market_starfighter_holder@0 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.u_wing_holder
                            type = u_wing_airframe_0
                            amount = 100
                            variant_name = "U Wing V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_u_wing_active
                            check_variable = {global.market_starfighter_holder@1 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = u_wing_airframe_1
                            amount = 100
                            variant_name = "U Wing V2"
                        }
                    }
                }
            }
            product_auto_buy_u_wing_click = {
                set_country_flag = auto_buy_enabled_u_wing
            }
            level_0_u_wing_click = {
                set_country_flag = level_0_u_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_1_u_wing_active
                    }
                    clr_country_flag = level_1_u_wing_active
                }
            }
            level_1_u_wing_click = {
                set_country_flag = level_1_u_wing_active
			    if = {
                    limit = {
                        has_country_flag = level_0_u_wing_active
                    }
                    clr_country_flag = level_0_u_wing_active
                }
            }
        }
        triggers = {
            auto_buy_display_u_wing_visible = {
                has_country_flag = auto_buy_enabled_u_wing

            }
            product_price_u_wing_visible = {
                has_country_flag = level_0_u_wing_active
            }
            product_price_level_2_u_wing_visible = {
                has_country_flag = level_1_u_wing_active
            }
            level_0_u_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_0_u_wing_active
                }
            }
            level_1_u_wing_click_enabled = {
                NOT = {
                    has_country_flag = level_1_u_wing_active
                }
            }
        }
    }
    Marketplace_buying_fighters_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_fighters_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = starfighters_buying_market_open
            has_country_flag = open_first_tab_lazy
        }
        effects = {
            product_buy_one_tie_dagger_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@13 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_dagger_airframe_0
                            amount = 100
                            variant_name = "tie_dagger"
                        }
                    }else = {
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_dagger_holder
                            type = tie_dagger_airframe_0
                            amount = 100
                            variant_name = "tie_dagger"
                        }
                    }
                }
            }
            product_auto_buy_tie_dagger_click = {
                set_country_flag = auto_buy_enabled_tie_dagger
            }
            product_buy_one_tie_silencer_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@14 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_silencer_airframe_0
                            amount = 100
                            variant_name = "tie_silencer"
                        }
                    }else = {
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_silencer_holder
                            type = tie_silencer_airframe_0
                            amount = 100
                            variant_name = "tie_silencer"
                        }
                    }
                }
            }
            product_auto_buy_tie_silencer_click = {
                set_country_flag = auto_buy_enabled_tie_silencer
            }
            product_buy_one_tie_automated_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_automated_active
                            check_variable = {global.market_starfighter_holder@15 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_automated_airframe_0
                            amount = 100
                            variant_name = "tie_automated V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_automated_active
                            check_variable = {global.market_starfighter_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_automated_airframe_0
                            amount = 100
                            variant_name = "tie_automated V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_automated_active
                            check_variable = {global.market_starfighter_holder@15 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_automated_holder
                            type = tie_automated_airframe_0
                            amount = 100
                            variant_name = "tie_automated V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_automated_active
                            check_variable = {global.market_starfighter_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_automated_holder
                            type = tie_automated_airframe_1
                            amount = 100
                            variant_name = "tie_automated V2"
                        }
                    }
                }
            }
            product_auto_buy_tie_automated_click = {
                set_country_flag = auto_buy_enabled_tie_automated
            }
            level_0_tie_automated_click = {
                set_country_flag = level_0_tie_automated_active
			    if = {
                    limit = {
                        has_country_flag = level_1_tie_automated_active
                    }
                    clr_country_flag = level_1_tie_automated_active
                }
            }
            level_1_tie_automated_click = {
                set_country_flag = level_1_tie_automated_active
			    if = {
                    limit = {
                        has_country_flag = level_0_tie_automated_active
                    }
                    clr_country_flag = level_0_tie_automated_active
                }
            }
            product_buy_one_tie_fighter_click = {
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = brought_out
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_fighter_airframe_0
                            amount = 100
                            variant_name = "tie_fighter V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@17 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_fighter_airframe_1
                            amount = 100
                            variant_name = "tie_fighter V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@18 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_fighter_airframe_2
                            amount = 100
                            variant_name = "tie_fighter V3"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@19 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_fighter_airframe_3
                            amount = 100
                            variant_name = "tie_fighter V4"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighter_holder
                            type = tie_fighter_airframe_0
                            amount = 100
                            variant_name = "tie_fighter V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@17 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighter_holderemp
                            type = tie_fighter_airframe_1
                            amount = 100
                            variant_name = "tie_fighter V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@18 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighter_holder
                            type = tie_fighter_airframe_2
                            amount = 100
                            variant_name = "tie_fighter V3"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_tie_fighter_active
                            check_variable = {global.market_starfighter_holder@19 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighter_holder
                            type = tie_fighter_airframe_3
                            amount = 100
                            variant_name = "tie_fighter V4"
                        }
                    }
                }
            }
            product_auto_buy_tie_fighter_click = {
                set_country_flag = auto_buy_enabled_tie_fighter
            }
            level_0_tie_fighter_click = {
                set_country_flag = level_0_tie_fighter_active
			    if = {
                    limit = {
                        has_country_flag = level_1_tie_fighter_active
                    }
                    clr_country_flag = level_1_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_fighter_active
                    }
                    clr_country_flag = level_2_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_fighter_active
                    }
                    clr_country_flag = level_3_tie_fighter_active
                }
            }
            level_1_tie_fighter_click = {
                set_country_flag = level_1_tie_fighter_active
			    if = {
                    limit = {
                        has_country_flag = level_0_tie_fighter_active
                    }
                    clr_country_flag = level_0_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_fighter_active
                    }
                    clr_country_flag = level_2_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_fighter_active
                    }
                    clr_country_flag = level_3_tie_fighter_active
                }
            }
            level_2_tie_fighter_click = {
                set_country_flag = level_2_tie_fighter_active
                if = {
                    limit = {
                        has_country_flag = level_0_tie_fighter_active
                    }
                    clr_country_flag = level_0_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_tie_fighter_active
                    }
                    clr_country_flag = level_1_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_fighter_active
                    }
                    clr_country_flag = level_3_tie_fighter_active
                }
            }
            level_3_tie_fighter_click = {
                set_country_flag = level_3_tie_fighter_active
                if = {
                    limit = {
                        has_country_flag = level_1_tie_fighter_active
                    }
                    clr_country_flag = level_1_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_fighter_active
                    }
                    clr_country_flag = level_2_tie_fighter_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_tie_fighter_active
                    }
                    clr_country_flag = level_0_tie_fighter_active
                }
            }
            product_buy_one_tie_interceptor_click = {
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = brought_out
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@20 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_interceptor_airframe_0
                            amount = 100
                            variant_name = "tie_interceptor V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@21 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_interceptor_airframe_1
                            amount = 100
                            variant_name = "tie_interceptor V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@22 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_interceptor_airframe_2
                            amount = 100
                            variant_name = "tie_interceptor V3"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@23 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_interceptor_airframe_3
                            amount = 100
                            variant_name = "tie_interceptor V4"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@20 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_interceptor_holder
                            type = tie_interceptor_airframe_0
                            amount = 100
                            variant_name = "tie_interceptor V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@21 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_interceptor_holderemp
                            type = tie_interceptor_airframe_1
                            amount = 100
                            variant_name = "tie_interceptor V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@22 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_interceptor_holder
                            type = tie_interceptor_airframe_2
                            amount = 100
                            variant_name = "tie_interceptor V3"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_tie_interceptor_active
                            check_variable = {global.market_starfighter_holder@23 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_interceptor_holder
                            type = tie_interceptor_airframe_3
                            amount = 100
                            variant_name = "tie_interceptor V4"
                        }
                    }
                }
            }
            product_auto_buy_tie_interceptor_click = {
                set_country_flag = auto_buy_enabled_tie_interceptor
            }
            level_0_tie_interceptor_click = {
                set_country_flag = level_0_tie_interceptor_active
                if = {
                    limit = {
                        has_country_flag = level_1_tie_interceptor_active
                    }
                    clr_country_flag = level_1_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_interceptor_active
                    }
                    clr_country_flag = level_2_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_interceptor_active
                    }
                    clr_country_flag = level_3_tie_interceptor_active
                }
            }
            level_1_tie_interceptor_click = {
                set_country_flag = level_1_tie_interceptor_active
                if = {
                    limit = {
                        has_country_flag = level_0_tie_interceptor_active
                    }
                    clr_country_flag = level_0_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_interceptor_active
                    }
                    clr_country_flag = level_2_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_interceptor_active
                    }
                    clr_country_flag = level_3_tie_interceptor_active
                }
            }
            level_2_tie_interceptor_click = {
                set_country_flag = level_2_tie_interceptor_active
                if = {
                    limit = {
                        has_country_flag = level_1_tie_interceptor_active
                    }
                    clr_country_flag = level_1_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_tie_interceptor_active
                    }
                    clr_country_flag = level_0_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_interceptor_active
                    }
                    clr_country_flag = level_3_tie_interceptor_active
                }
            }
            level_3_tie_interceptor_click = {
                set_country_flag = level_3_tie_interceptor_active
                if = {
                    limit = {
                        has_country_flag = level_1_tie_interceptor_active
                    }
                    clr_country_flag = level_1_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_tie_interceptor_active
                    }
                    clr_country_flag = level_0_tie_interceptor_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_interceptor_active
                    }
                    clr_country_flag = level_2_tie_interceptor_active
                }
            }
            product_buy_one_tie_fighterbomber_click = {
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = brought_out
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_fighterbomber_active
                            check_variable = {global.market_starfighter_holder@24 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_fighterbomber_airframe_0
                            amount = 100
                            variant_name = "tie_fighterbomber V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_fighterbomber_active
                            check_variable = {global.market_starfighter_holder@25 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_fighterbomber_airframe_1
                            amount = 100
                            variant_name = "tie_fighterbomber V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_tie_fighterbomber_active
                            check_variable = {global.market_starfighter_holder@26 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_fighterbomber_airframe_2
                            amount = 100
                            variant_name = "tie_fighterbomber V3"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_fighterbomber_active
                            check_variable = {global.market_starfighter_holder@24 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighterbomber_holder
                            type = tie_fighterbomber_airframe_0
                            amount = 100
                            variant_name = "tie_fighterbomber V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_fighterbomber_active
                            check_variable = {global.market_starfighter_holder@25 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighterbomber_holderemp
                            type = tie_fighterbomber_airframe_1
                            amount = 100
                            variant_name = "tie_fighterbomber V2"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_tie_fighterbomber_active
                            check_variable = {global.market_starfighter_holder@26 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_fighterbomber_holder
                            type = tie_fighterbomber_airframe_2
                            amount = 100
                            variant_name = "tie_fighterbomber V3"
                        }
                    }
                }
            }
            product_auto_buy_tie_fighterbomber_click = {
                set_country_flag = auto_buy_enabled_tie_fighterbomber
            }
            level_0_tie_fighterbomber_click = {
                set_country_flag = level_0_tie_fighterbomber_active
			    if = {
                    limit = {
                        has_country_flag = level_1_tie_fighterbomber_active
                    }
                    clr_country_flag = level_1_tie_fighterbomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_fighterbomber_active
                    }
                    clr_country_flag = level_2_tie_fighterbomber_active
                }
            }
            level_1_tie_fighterbomber_click = {
                set_country_flag = level_1_tie_fighterbomber_active
			    if = {
                    limit = {
                        has_country_flag = level_0_tie_fighterbomber_active
                    }
                    clr_country_flag = level_0_tie_fighterbomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_fighterbomber_active
                    }
                    clr_country_flag = level_2_tie_fighterbomber_active
                }
            }
            level_2_tie_fighterbomber_click = {
                set_country_flag = level_2_tie_fighterbomber_active
                if = {
                    limit = {
                        has_country_flag = level_1_tie_fighterbomber_active
                    }
                    clr_country_flag = level_1_tie_fighterbomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_tie_fighterbomber_active
                    }
                    clr_country_flag = level_0_tie_fighterbomber_active
                }
            }
            product_buy_one_tie_bomber_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@0 > 0}
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                        if = {
                            limit = {
                                has_country_flag = level_0_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@27 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = EMP
                                type = tie_bomber_airframe_0
                                amount = 100
                                variant_name = "tie_bomber V1"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_1_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@28 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = emp
                                type = tie_bomber_airframe_1
                                amount = 100
                                variant_name = "tie_bomber V2"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_2_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@29 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = emp
                                type = tie_bomber_airframe_2
                                amount = 100
                                variant_name = "tie_bomber V3"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_3_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@30 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = emp
                                type = tie_bomber_airframe_3
                                amount = 100
                                variant_name = "tie_bomber V4"
                            }
                        }
                    }else = {
                        if = {
                            limit = {
                                has_country_flag = level_0_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@27 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.tie_bomber_holder
                                type = tie_bomber_airframe_0
                                amount = 100
                                variant_name = "tie_bomber V1"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_1_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@28 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.tie_bomber_holderemp
                                type = tie_bomber_airframe_1
                                amount = 100
                                variant_name = "tie_bomber V2"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_2_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@29 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.tie_bomber_holder
                                type = tie_bomber_airframe_2
                                amount = 100
                                variant_name = "tie_bomber V3"
                            }
                        }else_if = {
                            limit = {
                                has_country_flag = level_3_tie_bomber_active
                                check_variable = {global.market_starfighter_holder@30 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.tie_bomber_holder
                                type = tie_bomber_airframe_3
                                amount = 100
                                variant_name = "tie_bomber V4"
                            }
                        }
                    }
                }
            }
            product_auto_buy_tie_bomber_click = {
                set_country_flag = auto_buy_enabled_tie_bomber
            }
            level_0_tie_bomber_click = {
                set_country_flag = level_0_tie_bomber_active
			    if = {
                    limit = {
                        has_country_flag = level_3_tie_bomber_active
                    }
                    clr_country_flag = level_3_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_tie_bomber_active
                    }
                    clr_country_flag = level_1_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_bomber_active
                    }
                    clr_country_flag = level_2_tie_bomber_active
                }
            }
            level_1_tie_bomber_click = {
                set_country_flag = level_1_tie_bomber_active
			    if = {
                    limit = {
                        has_country_flag = level_3_tie_bomber_active
                    }
                    clr_country_flag = level_3_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_tie_bomber_active
                    }
                    clr_country_flag = level_1_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_bomber_active
                    }
                    clr_country_flag = level_2_tie_bomber_active
                }
            }
            level_2_tie_bomber_click = {
                set_country_flag = level_2_tie_bomber_active
                if = {
                    limit = {
                        has_country_flag = level_0_tie_bomber_active
                    }
                    clr_country_flag = level_0_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_tie_bomber_active
                    }
                    clr_country_flag = level_1_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_tie_bomber_active
                    }
                    clr_country_flag = level_3_tie_bomber_active
                }
            }
            level_3_tie_bomber_click = {
                set_country_flag = level_3_tie_bomber_active
                if = {
                    limit = {
                        has_country_flag = level_0_tie_bomber_active
                    }
                    clr_country_flag = level_0_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_tie_bomber_active
                    }
                    clr_country_flag = level_1_tie_bomber_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_tie_bomber_active
                    }
                    clr_country_flag = level_2_tie_bomber_active
                }
            }
        }
        triggers = {
            auto_buy_display_tie_fighter_visible = {
                has_country_flag = auto_buy_enabled_tie_fighter

            }
            auto_buy_display_tie_interceptor_visible = {
                has_country_flag = auto_buy_enabled_tie_interceptor

            }
            auto_buy_display_tie_fighterbomber_visible = {
                has_country_flag = auto_buy_enabled_tie_fighterbomber

            }
            auto_buy_display_tie_bomber_visible = {
                has_country_flag = auto_buy_enabled_tie_bomber

            }
            auto_buy_display_tie_dagger_visible = {
                has_country_flag = auto_buy_enabled_tie_dagger

            }
            auto_buy_display_tie_automated_visible = {
                has_country_flag = auto_buy_enabled_tie_automated

            }
            product_price_tie_automated_visible = {
                has_country_flag = level_0_tie_automated_active
            }
            product_price_level_2_tie_automated_visible = {
                has_country_flag = level_1_tie_automated_active
            }
            product_price_tie_fighter_visible = {
                has_country_flag = level_0_tie_fighter_active
            }
            product_price_level_2_tie_fighter_visible = {
                has_country_flag = level_1_tie_fighter_active
            }
            product_price_level_3_tie_fighter_visible = {
                has_country_flag = level_2_tie_fighter_active
            }
            product_price_level_4_tie_fighter_visible = {
                has_country_flag = level_3_tie_fighter_active
            }
            product_price_tie_interceptor_visible = {
                has_country_flag = level_0_tie_interceptor_active
            }
            product_price_level_2_tie_interceptor_visible = {
                has_country_flag = level_1_tie_interceptor_active
            }
            product_price_level_3_tie_interceptor_visible = {
                has_country_flag = level_2_tie_interceptor_active
            }
            product_price_level_4_tie_interceptor_visible = {
                has_country_flag = level_3_tie_interceptor_active
            }
            product_price_tie_fighterbomber_visible = {
                has_country_flag = level_0_tie_fighterbomber_active
            }
            product_price_level_2_tie_fighterbomber_visible = {
                has_country_flag = level_1_tie_fighterbomber_active
            }
            product_price_level_3_tie_fighterbomber_visible = {
                has_country_flag = level_2_tie_fighterbomber_active
            }
            product_price_tie_bomber_visible = {
                has_country_flag = level_0_tie_bomber_active
            }
            product_price_level_2_tie_bomber_visible = {
                has_country_flag = level_1_tie_bomber_active
            }
            product_price_level_3_tie_bomber_visible = {
                has_country_flag = level_2_tie_bomber_active
            }
            product_price_level_4_tie_bomber_visible = {
                has_country_flag = level_3_tie_bomber_active
            }
            level_0_tie_fighter_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tie_fighter_active
                }
            }
            level_1_tie_fighter_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tie_fighter_active
                }
            }
            level_2_tie_fighter_click_enabled = {
                NOT = {
                    has_country_flag = level_2_tie_fighter_active
                }
            }
            level_3_tie_fighter_click_enabled = {
                NOT = {
                    has_country_flag = level_3_tie_fighter_active
                }
            }

            level_0_tie_interceptor_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tie_interceptor_active
                }
            }
            level_1_tie_interceptor_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tie_interceptor_active
                }
            }
            level_2_tie_interceptor_click_enabled = {
                NOT = {
                    has_country_flag = level_2_tie_interceptor_active
                }
            }
            level_3_tie_interceptor_click_enabled = {
                NOT = {
                    has_country_flag = level_3_tie_interceptor_active
                }
            }
            
            level_0_tie_fighterbomber_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tie_fighterbomber_active
                }
            }
            level_1_tie_fighterbomber_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tie_fighterbomber_active
                }
            }
            level_2_tie_fighterbomber_click_enabled = {
                NOT = {
                    has_country_flag = level_2_tie_fighterbomber_active
                }
            }

            level_0_tie_bomber_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tie_bomber_active
                }
            }
            level_1_tie_bomber_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tie_bomber_active
                }
            }
            level_2_tie_bomber_click_enabled = {
                NOT = {
                    has_country_flag = level_2_tie_bomber_active
                }
            }
            level_3_tie_bomber_click_enabled = {
                NOT = {
                    has_country_flag = level_3_tie_bomber_active
                }
            }

            level_0_tie_automated_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tie_automated_active
                }
            }
            level_1_tie_automated_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tie_automated_active
                }
            }
        }
    }
    Marketplace_buying_fighters_2_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_fighters_2_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = starfighters_buying_market_open
            has_country_flag = open_second_tab_lazy
        }
        effects = {
            product_buy_one_tie_silencer_click = {
                if = {
                    limit = {
                        check_variable = {global.market_starfighter_holder@14 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_silencer_airframe_0
                            amount = 100
                            variant_name = "tie_silencer"
                        }
                    }else = {
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_silencer_holder
                            type = tie_silencer_airframe_0
                            amount = 100
                            variant_name = "tie_silencer"
                        }
                    }
                }
            }
            product_auto_buy_tie_silencer_click = {
                set_country_flag = auto_buy_enabled_tie_silencer
            }
        }
        triggers = {
            auto_buy_display_tie_silencer_visible = {
                has_country_flag = auto_buy_enabled_tie_silencer

            }
        }
    }
    Marketplace_buying_fighters_neutral_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_fighters_neutral_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = neutral_market_open
            has_country_flag = starfighters_buying_market_open
        }
        effects = {
            
        }
    }
    Marketplace_buying_ground_1_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_tanks_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = open_market_ground_forces
            has_country_flag = open_first_tab_lazy
        }
        effects = {
            product_buy_one_t3_b_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_t3_b_active
                            check_variable = {global.market_tank_holder@0 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = t3_b_chassis_0
                            amount = 100
                            variant_name = "t3_b V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t3_b_active
                            check_variable = {global.market_tank_holder@1 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t3_b_chassis_1
                            amount = 100
                            variant_name = "t3_b V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_t3_b_active
                            check_variable = {global.market_tank_holder@0 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.t3_b_holder
                            type = t3_b_chassis_0
                            amount = 100
                            variant_name = "t3_b V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t3_b_active
                            check_variable = {global.market_tank_holder@1 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t3_b_chassis_1
                            amount = 100
                            variant_name = "t3_b V2"
                        }
                    }
                }
            }
            product_auto_buy_t3_b_click = {
                set_country_flag = auto_buy_enabled_t3_b
            }
            level_0_t3_b_click = {
                set_country_flag = level_0_t3_b_active
			    if = {
                    limit = {
                        has_country_flag = level_1_t3_b_active
                    }
                    clr_country_flag = level_1_t3_b_active
                }
            }
            level_1_t3_b_click = {
                set_country_flag = level_1_t3_b_active
			    if = {
                    limit = {
                        has_country_flag = level_0_t3_b_active
                    }
                    clr_country_flag = level_0_t3_b_active
                }
            }
            product_buy_one_t4_b_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_t4_b_active
                            check_variable = {global.market_tank_holder@2 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = t4_b_chassis_0
                            amount = 100
                            variant_name = "t4_b V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t4_b_active
                            check_variable = {global.market_tank_holder@3 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t4_b_chassis_1
                            amount = 100
                            variant_name = "t4_b V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_t4_b_active
                            check_variable = {global.market_tank_holder@2 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.t4_b_holder
                            type = t4_b_chassis_0
                            amount = 100
                            variant_name = "t4_b V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t4_b_active
                            check_variable = {global.market_tank_holder@3 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t4_b_chassis_1
                            amount = 100
                            variant_name = "t4_b V2"
                        }
                    }
                }
            }
            product_auto_buy_t4_b_click = {
                set_country_flag = auto_buy_enabled_t4_b
            }
            level_0_t4_b_click = {
                set_country_flag = level_0_t4_b_active
			    if = {
                    limit = {
                        has_country_flag = level_1_t4_b_active
                    }
                    clr_country_flag = level_1_t4_b_active
                }
            }
            level_1_t4_b_click = {
                set_country_flag = level_1_t4_b_active
			    if = {
                    limit = {
                        has_country_flag = level_0_t4_b_active
                    }
                    clr_country_flag = level_0_t4_b_active
                }
            }
            product_buy_one_t1_b_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_t1_b_active
                            check_variable = {global.market_tank_holder@4 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = t1_b_chassis_0
                            amount = 100
                            variant_name = "t1_b V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t1_b_active
                            check_variable = {global.market_tank_holder@5 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t1_b_chassis_1
                            amount = 100
                            variant_name = "t1_b V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_t1_b_active
                            check_variable = {global.market_tank_holder@4 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.t1_b_holder
                            type = t1_b_chassis_0
                            amount = 100
                            variant_name = "t1_b V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t1_b_active
                            check_variable = {global.market_tank_holder@5 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t1_b_chassis_1
                            amount = 100
                            variant_name = "t1_b V2"
                        }
                    }
                }
            }
            product_auto_buy_t1_b_click = {
                set_country_flag = auto_buy_enabled_t1_b
            }
            level_0_t1_b_click = {
                set_country_flag = level_0_t1_b_active
			    if = {
                    limit = {
                        has_country_flag = level_1_t1_b_active
                    }
                    clr_country_flag = level_1_t1_b_active
                }
            }
            level_1_t1_b_click = {
                set_country_flag = level_1_t1_b_active
			    if = {
                    limit = {
                        has_country_flag = level_0_t1_b_active
                    }
                    clr_country_flag = level_0_t1_b_active
                }
            }
            product_buy_one_t1_c_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_t1_c_active
                            check_variable = {global.market_tank_holder@6 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = t1_c_chassis_0
                            amount = 100
                            variant_name = "t1_c V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t1_c_active
                            check_variable = {global.market_tank_holder@7 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t1_c_chassis_1
                            amount = 100
                            variant_name = "t1_c V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_t1_c_active
                            check_variable = {global.market_tank_holder@6 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.t1_c_holder
                            type = t1_c_chassis_0
                            amount = 100
                            variant_name = "t1_c V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_t1_c_active
                            check_variable = {global.market_tank_holder@7 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = t1_c_chassis_1
                            amount = 100
                            variant_name = "t1_c V2"
                        }
                    }
                }
            }
            product_auto_buy_t1_click = {
                set_country_flag = auto_buy_enabled_t1_c
            }
            level_0_t1_c_click = {
                set_country_flag = level_0_t1_c_active
			    if = {
                    limit = {
                        has_country_flag = level_1_t1_c_active
                    }
                    clr_country_flag = level_1_t1_c_active
                }
            }
            level_1_t1_c_click = {
                set_country_flag = level_1_t1_c_active
			    if = {
                    limit = {
                        has_country_flag = level_0_t1_c_active
                    }
                    clr_country_flag = level_0_t1_c_active
                }
            }
            product_buy_one_AAC_1_speeder_tank_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_AAC_1_speeder_tank_active
                            check_variable = {global.market_tank_holder@8 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = AAC_1_speeder_tank_chassis_0
                            amount = 100
                            variant_name = "AAC_1_speeder_tank V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_AAC_1_speeder_tank_active
                            check_variable = {global.market_tank_holder@9 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = AAC_1_speeder_tank_chassis_1
                            amount = 100
                            variant_name = "AAC_1_speeder_tank V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_AAC_1_speeder_tank_active
                            check_variable = {global.market_tank_holder@8 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.AAC_1_speeder_tank_holder
                            type = AAC_1_speeder_tank_chassis_0
                            amount = 100
                            variant_name = "AAC_1_speeder_tank V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_AAC_1_speeder_tank_active
                            check_variable = {global.market_tank_holder@9 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = AAC_1_speeder_tank_chassis_1
                            amount = 100
                            variant_name = "AAC_1_speeder_tank V2"
                        }
                    }
                }
            }
            product_auto_buy_AAC_1_speeder_tank_click = {
                set_country_flag = auto_buy_enabled_AAC_1_speeder_tank
            }
            level_0_AAC_1_speeder_tank_click = {
                set_country_flag = level_0_AAC_1_speeder_tank_active
			    if = {
                    limit = {
                        has_country_flag = level_1_AAC_1_speeder_tank_active
                    }
                    clr_country_flag = level_1_AAC_1_speeder_tank_active
                }
            }
            level_1_AAC_1_speeder_tank_click = {
                set_country_flag = level_1_AAC_1_speeder_tank_active
			    if = {
                    limit = {
                        has_country_flag = level_0_AAC_1_speeder_tank_active
                    }
                    clr_country_flag = level_0_AAC_1_speeder_tank_active
                }
            }
            product_buy_one_combat_speeder_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_combat_speeder_active
                            check_variable = {global.market_tank_holder@10 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = combat_speeder_chassis_0
                            amount = 100
                            variant_name = "combat_speeder V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_combat_speeder_active
                            check_variable = {global.market_tank_holder@11 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = combat_speeder_chassis_1
                            amount = 100
                            variant_name = "combat_speeder V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_combat_speeder_active
                            check_variable = {global.market_tank_holder@10 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.combat_speeder_holder
                            type = combat_speeder_chassis_0
                            amount = 100
                            variant_name = "combat_speeder V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_combat_speeder_active
                            check_variable = {global.market_tank_holder@11 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = combat_speeder_chassis_1
                            amount = 100
                            variant_name = "combat_speeder V2"
                        }
                    }
                }
            }
            product_auto_buy_combat_speeder_click = {
                set_country_flag = auto_buy_enabled_combat_speeder
            }
            level_0_combat_speeder_click = {
                set_country_flag = level_0_combat_speeder_active
			    if = {
                    limit = {
                        has_country_flag = level_1_combat_speeder_active
                    }
                    clr_country_flag = level_1_combat_speeder_active
                }
            }
            level_1_combat_speeder_click = {
                set_country_flag = level_1_combat_speeder_active
			    if = {
                    limit = {
                        has_country_flag = level_0_combat_speeder_active
                    }
                    clr_country_flag = level_0_combat_speeder_active
                }
            }
        }
        triggers = {
            auto_buy_display_t3_b_visible = {
                has_country_flag = auto_buy_enabled_t3_b

            }
            auto_buy_display_t4_b_visible = {
                has_country_flag = auto_buy_enabled_t4_b

            }
            auto_buy_display_t1_b_visible = {
                has_country_flag = auto_buy_enabled_t1_b

            }
            auto_buy_display_t1_c_visible = {
                has_country_flag = auto_buy_enabled_t1_c

            }
            auto_buy_display_AAC_1_speeder_tank_visible = {
                has_country_flag = auto_buy_enabled_AAC_1_speeder_tank

            }
            auto_buy_display_combat_speeder_visible = {
                has_country_flag = auto_buy_enabled_combat_speeder

            }
            product_price_t3_b_visible = {
                has_country_flag = level_0_t3_b_active
            }
            product_price_level_2_t3_b_visible = {
                has_country_flag = level_1_t3_b_active
            }
            product_price_t4_b_visible = {
                has_country_flag = level_0_t4_b_active
            }
            product_price_level_2_t4_b_visible = {
                has_country_flag = level_1_t4_b_active
            }
            product_price_t1_b_visible = {
                has_country_flag = level_0_t1_b_active
            }
            product_price_level_2_t1_b_visible = {
                has_country_flag = level_1_t1_b_active
            }
            product_price_t1_c_visible = {
                has_country_flag = level_0_t1_c_active
            }
            product_price_level_2_t1_c_visible = {
                has_country_flag = level_1_t1_c_active
            }
            product_price_AAC_1_speeder_tank_visible = {
                has_country_flag = level_0_AAC_1_speeder_tank_active
            }
            product_price_level_2_AAC_1_speeder_tank_visible = {
                has_country_flag = level_1_AAC_1_speeder_tank_active
            }
            product_price_combat_speeder_visible = {
                has_country_flag = level_0_combat_speeder_active
            }
            product_price_level_2_combat_speeder_visible = {
                has_country_flag = level_1_combat_speeder_active
            }
            level_0_t3_b_click_enabled = {
                NOT = {
                    has_country_flag = level_0_t3_b_active
                }
            }
            level_1_t3_b_click_enabled = {
                NOT = {
                    has_country_flag = level_1_t3_b_active
                }
            }
            level_0_t4_b_click_enabled = {
                NOT = {
                    has_country_flag = level_0_t4_b_active
                }
            }
            level_1_t4_b_click_enabled = {
                NOT = {
                    has_country_flag = level_1_t4_b_active
                }
            }
            level_0_t1_b_click_enabled = {
                NOT = {
                    has_country_flag = level_0_t1_b_active
                }
            }
            level_1_t1_b_click_enabled = {
                NOT = {
                    has_country_flag = level_1_t1_b_active
                }
            }
            level_0_t1_c_click_enabled = {
                NOT = {
                    has_country_flag = level_0_t1_c_active
                }
            }
            level_1_t1_c_click_enabled = {
                NOT = {
                    has_country_flag = level_1_t1_c_active
                }
            }
            level_0_AAC_1_speeder_tank_click_enabled = {
                NOT = {
                    has_country_flag = level_0_AAC_1_speeder_tank_active
                }
            }
            level_1_AAC_1_speeder_tank_click_enabled = {
                NOT = {
                    has_country_flag = level_1_AAC_1_speeder_tank_active
                }
            }
            level_0_combat_speeder_click_enabled = {
                NOT = {
                    has_country_flag = level_0_combat_speeder_active
                }
            }
            level_1_combat_speeder_click_enabled = {
                NOT = {
                    has_country_flag = level_1_combat_speeder_active
                }
            }
        }
    }
    Marketplace_buying_ground_2_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_soft_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = open_market_ground_forces
            has_country_flag = open_second_tab_lazy
        }
        effects = {
            product_buy_one_flash_speeder_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_flash_speeder_active
                            check_variable = {global.market_tank_holder@12 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = flash_speeder_chassis_0
                            amount = 100
                            variant_name = "flash_speeder V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_flash_speeder_active
                            check_variable = {global.market_tank_holder@13 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = flash_speeder_chassis_1
                            amount = 100
                            variant_name = "flash_speeder V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_flash_speeder_active
                            check_variable = {global.market_tank_holder@12 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.flash_speeder_holder
                            type = flash_speeder_chassis_0
                            amount = 100
                            variant_name = "flash_speeder V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_flash_speeder_active
                            check_variable = {global.market_tank_holder@13 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = flash_speeder_chassis_1
                            amount = 100
                            variant_name = "flash_speeder V2"
                        }
                    }
                }
            }
            product_auto_buy_flash_speeder_click = {
                set_country_flag = auto_buy_enabled_flash_speeder
            }
            level_0_flash_speeder_click = {
                set_country_flag = level_0_flash_speeder_active
			    if = {
                    limit = {
                        has_country_flag = level_1_flash_speeder_active
                    }
                    clr_country_flag = level_1_flash_speeder_active
                }
            }
            level_1_flash_speeder_click = {
                set_country_flag = level_1_flash_speeder_active
			    if = {
                    limit = {
                        has_country_flag = level_0_flash_speeder_active
                    }
                    clr_country_flag = level_0_flash_speeder_active
                }
            }
            product_buy_one_freedom_one_blaster_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@15 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = infantry_equipment_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@17 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_2
                            amount = 100
                        }
                    }
                    else_if = {
                        limit = {
                            has_country_flag = level_3_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@18 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_3
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@15 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.freedom_one_blaster_holder
                            type = infantry_equipment_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@17 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_freedom_one_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@18 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_3
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_freedom_one_blaster_click = {
                set_country_flag = auto_buy_enabled_freedom_one_blaster
            }
            level_0_freedom_one_blaster_click = {
                set_country_flag = level_0_freedom_one_blaster_active
			    if = {
                    limit = {
                        has_country_flag = level_1_freedom_one_blaster_active
                    }
                    clr_country_flag = level_1_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_freedom_one_blaster_active
                    }
                    clr_country_flag = level_2_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_freedom_one_blaster_active
                    }
                    clr_country_flag = level_3_freedom_one_blaster_active
                }
            }
            level_1_freedom_one_blaster_click = {
                set_country_flag = level_1_freedom_one_blaster_active
			    if = {
                    limit = {
                        has_country_flag = level_0_freedom_one_blaster_active
                    }
                    clr_country_flag = level_0_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_freedom_one_blaster_active
                    }
                    clr_country_flag = level_2_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_freedom_one_blaster_active
                    }
                    clr_country_flag = level_3_freedom_one_blaster_active
                }
            }
            level_2_freedom_one_blaster_click = {
                set_country_flag = level_2_freedom_one_blaster_active
                if = {
                    limit = {
                        has_country_flag = level_0_freedom_one_blaster_active
                    }
                    clr_country_flag = level_0_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_freedom_one_blaster_active
                    }
                    clr_country_flag = level_1_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_freedom_one_blaster_active
                    }
                    clr_country_flag = level_3_freedom_one_blaster_active
                }
            }
            level_3_freedom_one_blaster_click = {
                if = {
                    limit = {
                        has_country_flag = level_0_freedom_one_blaster_active
                    }
                    clr_country_flag = level_0_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_freedom_one_blaster_active
                    }
                    clr_country_flag = level_2_freedom_one_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_freedom_one_blaster_active
                    }
                    clr_country_flag = level_1_freedom_one_blaster_active
                }
                set_country_flag = level_3_freedom_one_blaster_active
            }
            product_buy_one_A280_blaster_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_A280_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@19 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = cheap_blaster_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_A280_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@20 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_A280_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@21 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_2
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_A280_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@19 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.A280_blaster_holder
                            type = cheap_blaster_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_A280_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@20 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_A280_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@21 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_2
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_A280_blaster_click = {
                set_country_flag = auto_buy_enabled_A280_blaster
            }
            level_0_A280_blaster_click = {
                set_country_flag = level_0_A280_blaster_active
			    if = {
                    limit = {
                        has_country_flag = level_1_A280_blaster_active
                    }
                    clr_country_flag = level_1_A280_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_A280_blaster_active
                    }
                    clr_country_flag = level_2_A280_blaster_active
                }
            }
            level_1_A280_blaster_click = {
                set_country_flag = level_1_A280_blaster_active
			    if = {
                    limit = {
                        has_country_flag = level_0_A280_blaster_active
                    }
                    clr_country_flag = level_0_A280_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_A280_blaster_active
                    }
                    clr_country_flag = level_2_A280_blaster_active
                }
            }
            level_2_A280_blaster_click = {
                set_country_flag = level_2_A280_blaster_active
                if = {
                    limit = {
                        has_country_flag = level_0_A280_blaster_active
                    }
                    clr_country_flag = level_0_A280_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_A280_blaster_active
                    }
                    clr_country_flag = level_1_A280_blaster_active
                }
            }
            product_buy_one_HH_12_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_HH_12_active
                            check_variable = {global.soft_market_ic_cost_holder@22 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = anti_tank_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_HH_12_active
                            check_variable = {global.soft_market_ic_cost_holder@23 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_HH_12_active
                            check_variable = {global.soft_market_ic_cost_holder@24 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_3
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_HH_12_active
                            check_variable = {global.soft_market_ic_cost_holder@22 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.HH_12_holder
                            type = anti_tank_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_HH_12_active
                            check_variable = {global.soft_market_ic_cost_holder@23 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_HH_12_active
                            check_variable = {global.soft_market_ic_cost_holder@24 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_3
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_HH_12_click = {
                set_country_flag = auto_buy_enabled_HH_12
            }
            level_0_HH_12_click = {
                set_country_flag = level_0_HH_12_active
			    if = {
                    limit = {
                        has_country_flag = level_1_HH_12_active
                    }
                    clr_country_flag = level_1_HH_12_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_HH_12_active
                    }
                    clr_country_flag = level_2_HH_12_active
                }
            }
            level_1_HH_12_click = {
                set_country_flag = level_1_HH_12_active
			    if = {
                    limit = {
                        has_country_flag = level_0_HH_12_active
                    }
                    clr_country_flag = level_0_HH_12_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_HH_12_active
                    }
                    clr_country_flag = level_2_HH_12_active
                }
            }
            level_2_HH_12_click = {
                set_country_flag = level_2_HH_12_active
                if = {
                    limit = {
                        has_country_flag = level_1_HH_12_active
                    }
                    clr_country_flag = level_1_HH_12_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_HH_12_active
                    }
                    clr_country_flag = level_0_HH_12_active
                }
            }
            product_buy_one_T1_S_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_T1_S_active
                            check_variable = {global.soft_market_ic_cost_holder@25 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = motorized_equipment_1
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_T1_S_active
                            check_variable = {global.soft_market_ic_cost_holder@25 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.T1_S_holder
                            type = motorized_equipment_1
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_T1_S_click = {
                set_country_flag = auto_buy_enabled_T1_S
            }
            product_buy_one_MPTL_2a_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_MPTL_2a_active
                            check_variable = {global.soft_market_ic_cost_holder@26 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = artillery_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_MPTL_2a_active
                            check_variable = {global.soft_market_ic_cost_holder@27 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_MPTL_2a_active
                            check_variable = {global.soft_market_ic_cost_holder@28 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_3
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_MPTL_2a_active
                            check_variable = {global.soft_market_ic_cost_holder@26 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.MPTL_2a_holder
                            type = artillery_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_MPTL_2a_active
                            check_variable = {global.soft_market_ic_cost_holder@27 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_MPTL_2a_active
                            check_variable = {global.soft_market_ic_cost_holder@28 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_3
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_MPTL_2a_click = {
                set_country_flag = auto_buy_enabled_MPTL_2a
            }
            level_0_MPTL_2a_click = {
                set_country_flag = level_0_MPTL_2a_active
			    if = {
                    limit = {
                        has_country_flag = level_1_MPTL_2a_active
                    }
                    clr_country_flag = level_1_MPTL_2a_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_MPTL_2a_active
                    }
                    clr_country_flag = level_2_MPTL_2a_active
                }
            }
            level_1_MPTL_2a_click = {
                set_country_flag = level_1_MPTL_2a_active
			    if = {
                    limit = {
                        has_country_flag = level_0_MPTL_2a_active
                    }
                    clr_country_flag = level_0_MPTL_2a_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_MPTL_2a_active
                    }
                    clr_country_flag = level_2_MPTL_2a_active
                }
            }
            level_2_MPTL_2a_click = {
                set_country_flag = level_2_MPTL_2a_active
                if = {
                    limit = {
                        has_country_flag = level_0_MPTL_2a_active
                    }
                    clr_country_flag = level_0_MPTL_2a_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_MPTL_2a_active
                    }
                    clr_country_flag = level_1_MPTL_2a_active
                }
            }
        }
        triggers = {
            auto_buy_display_flash_speeder_visible = {
                has_country_flag = auto_buy_enabled_flash_speeder

            }
            auto_buy_display_freedom_one_blaster_visible = {
                has_country_flag = auto_buy_enabled_freedom_one_blaster

            }
            auto_buy_display_A280_blaster_visible = {
                has_country_flag = auto_buy_enabled_A280_blaster

            }
            auto_buy_display_T1_S_visible = {
                has_country_flag = auto_buy_enabled_T1_S

            }
            auto_buy_display_MPTL_2a_visible = {
                has_country_flag = auto_buy_enabled_MPTL_2a

            }
            auto_buy_display_HH_12_visible = {
                has_country_flag = auto_buy_enabled_HH_12

            }
            product_price_flash_speeder_visible = {
                has_country_flag = level_0_flash_speeder_active
            }
            product_price_level_2_flash_speeder_visible = {
                has_country_flag = level_1_flash_speeder_active
            }
            level_0_flash_speeder_click_enabled = {
                NOT = {
                    has_country_flag = level_0_flash_speeder_active
                }
            }
            level_1_flash_speeder_click_enabled = {
                NOT = {
                    has_country_flag = level_1_flash_speeder_active
                }
            }
            product_price_freedom_one_blaster_visible = {
                has_country_flag = level_0_freedom_one_blaster_active
            }
            product_price_level_2_freedom_one_blaster_visible = {
                has_country_flag = level_1_freedom_one_blaster_active
            }
            product_price_level_3_freedom_one_blaster_visible = {
                has_country_flag = level_2_freedom_one_blaster_active
            }
            product_price_level_4_freedom_one_blaster_visible = {
                has_country_flag = level_3_freedom_one_blaster_active
            }
            product_price_A280_blaster_visible = {
                has_country_flag = level_0_A280_blaster_active
            }
            product_price_level_2_A280_blaster_visible = {
                has_country_flag = level_1_A280_blaster_active
            }
            product_price_level_3_A280_blaster_visible = {
                has_country_flag = level_2_A280_blaster_active
            }
            product_price_MPTL_2a_visible = {
                has_country_flag = level_0_MPTL_2a_active
            }
            product_price_level_2_MPTL_2a_visible = {
                has_country_flag = level_1_MPTL_2a_active
            }
            product_price_level_3_MPTL_2a_visible = {
                has_country_flag = level_2_MPTL_2a_active
            }
            level_0_freedom_one_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_0_freedom_one_blaster_active
                }
            }
            level_1_freedom_one_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_1_freedom_one_blaster_active
                }
            }
            level_2_freedom_one_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_2_freedom_one_blaster_active
                }
            }
            level_3_freedom_one_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_3_freedom_one_blaster_active
                }
            }
            level_0_A280_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_0_A280_blaster_active
                }
            }
            level_1_A280_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_1_A280_blaster_active
                }
            }
            level_2_A280_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_2_A280_blaster_active
                }
            }
            level_2_HH_12_click_enabled = {
                NOT = {
                    has_country_flag = level_2_HH_12_active
                }
            }
            level_0_MPTL_2a_click_enabled = {
                NOT = {
                    has_country_flag = level_0_MPTL_2a_active
                }
            }
            level_1_MPTL_2a_click_enabled = {
                NOT = {
                    has_country_flag = level_1_MPTL_2a_active
                }
            }
            level_2_MPTL_2a_click_enabled = {
                NOT = {
                    has_country_flag = level_2_MPTL_2a_active
                }
            }
            level_0_HH_12_click_enabled = {
                NOT = {
                    has_country_flag = level_0_HH_12_active
                }
            }
            level_1_HH_12_click_enabled = {
                NOT = {
                    has_country_flag = level_1_HH_12_active
                }
            }
            product_price_HH_12_visible = {
                has_country_flag = level_0_HH_12_active
            }
            product_price_level_2_HH_12_visible = {
                has_country_flag = level_1_HH_12_active
            }
            product_price_level_3_HH_12_visible = {
                has_country_flag = level_2_HH_12_active
            }
        }
    }
    Marketplace_buying_ground_3_republic_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_ground_3_republic_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = republic_market_open
            has_country_flag = open_market_ground_forces
            has_country_flag = open_third_tab_lazy
        }
        effects = {
            product_buy_one_republic_supply_equipment_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_republic_supply_equipment_active
                            check_variable = {global.soft_market_ic_cost_holder@29 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = support_equipment_1
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_republic_supply_equipment_active
                            check_variable = {global.soft_market_ic_cost_holder@29 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.republic_supply_equipment_holder
                            type = republic_supply_equipment_0
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_republic_supply_equipment_click = {
                set_country_flag = auto_buy_enabled_republic_supply_equipment
            }
        }
        triggers = {
            auto_buy_display_republic_supply_equipment_visible = {
                has_country_flag = auto_buy_enabled_republic_supply_equipment

            }
        }
    }
    Marketplace_buying_ground_1_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_tanks_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ground_forces
            has_country_flag = open_first_tab_lazy
        }
        effects = {
            product_buy_one_at_at_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_at_at_active
                            check_variable = {global.market_tank_holder@14 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = at_at_chassis_0
                            amount = 100
                            variant_name = "at_at V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_at_active
                            check_variable = {global.market_tank_holder@15 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_at_chassis_1
                            amount = 100
                            variant_name = "at_at V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_at_at_active
                            check_variable = {global.market_tank_holder@14 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.at_at_holder
                            type = at_at_chassis_0
                            amount = 100
                            variant_name = "at_at V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_at_active
                            check_variable = {global.market_tank_holder@15 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_at_chassis_1
                            amount = 100
                            variant_name = "at_at V2"
                        }
                    }
                }
            }
            product_auto_buy_at_at_click = {
                set_country_flag = auto_buy_enabled_at_at
            }
            level_0_at_at_click = {
                set_country_flag = level_0_at_at_active
			    if = {
                    limit = {
                        has_country_flag = level_1_at_at_active
                    }
                    clr_country_flag = level_1_at_at_active
                }
            }
            level_1_at_at_click = {
                set_country_flag = level_1_at_at_active
			    if = {
                    limit = {
                        has_country_flag = level_0_at_at_active
                    }
                    clr_country_flag = level_0_at_at_active
                }
            }
            product_buy_one_at_aa_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_at_aa_active
                            check_variable = {global.market_tank_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = at_aa_chassis_0
                            amount = 100
                            variant_name = "at_aa V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_aa_active
                            check_variable = {global.market_tank_holder@17 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_aa_chassis_1
                            amount = 100
                            variant_name = "at_aa V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_at_aa_active
                            check_variable = {global.market_tank_holder@16 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.at_aa_holder
                            type = at_aa_chassis_0
                            amount = 100
                            variant_name = "at_aa V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_aa_active
                            check_variable = {global.market_tank_holder@17 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_aa_chassis_1
                            amount = 100
                            variant_name = "at_aa V2"
                        }
                    }
                }
            }
            product_auto_buy_at_aa_click = {
                set_country_flag = auto_buy_enabled_at_aa
            }
            level_0_at_aa_click = {
                set_country_flag = level_0_at_aa_active
			    if = {
                    limit = {
                        has_country_flag = level_1_at_aa_active
                    }
                    clr_country_flag = level_1_at_aa_active
                }
            }
            level_1_at_aa_click = {
                set_country_flag = level_1_at_aa_active
			    if = {
                    limit = {
                        has_country_flag = level_0_at_aa_active
                    }
                    clr_country_flag = level_0_at_aa_active
                }
            }
            product_buy_one_juggernaut_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_juggernaut_active
                            check_variable = {global.market_tank_holder@18 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = juggernaut_chassis_0
                            amount = 100
                            variant_name = "juggernaut V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_juggernaut_active
                            check_variable = {global.market_tank_holder@19 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = juggernaut_chassis_1
                            amount = 100
                            variant_name = "juggernaut V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_juggernaut_active
                            check_variable = {global.market_tank_holder@18 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.juggernaut_holder
                            type = juggernaut_chassis_0
                            amount = 100
                            variant_name = "juggernaut V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_juggernaut_active
                            check_variable = {global.market_tank_holder@19 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = juggernaut_chassis_1
                            amount = 100
                            variant_name = "juggernaut V2"
                        }
                    }
                }
            }
            product_auto_buy_juggernaut_click = {
                set_country_flag = auto_buy_enabled_juggernaut
            }
            level_0_juggernaut_click = {
                set_country_flag = level_0_juggernaut_active
			    if = {
                    limit = {
                        has_country_flag = level_1_juggernaut_active
                    }
                    clr_country_flag = level_1_juggernaut_active
                }
            }
            level_1_juggernaut_click = {
                set_country_flag = level_1_juggernaut_active
			    if = {
                    limit = {
                        has_country_flag = level_0_juggernaut_active
                    }
                    clr_country_flag = level_0_juggernaut_active
                }
            }
            product_buy_one_at_st_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_at_st_active
                            check_variable = {global.market_tank_holder@20 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = at_st_chassis_0
                            amount = 100
                            variant_name = "at_st V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_st_active
                            check_variable = {global.market_tank_holder@21 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_st_chassis_1
                            amount = 100
                            variant_name = "at_st V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_at_st_active
                            check_variable = {global.market_tank_holder@20 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.at_st_holder
                            type = at_st_chassis_0
                            amount = 100
                            variant_name = "at_st V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_st_active
                            check_variable = {global.market_tank_holder@21 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_st_chassis_1
                            amount = 100
                            variant_name = "at_st V2"
                        }
                    }
                }
            }
            product_auto_buy_at_st_click = {
                set_country_flag = auto_buy_enabled_at_st
            }
            level_0_at_st_click = {
                set_country_flag = level_0_at_st_active
			    if = {
                    limit = {
                        has_country_flag = level_1_at_st_active
                    }
                    clr_country_flag = level_1_at_st_active
                }
            }
            level_1_at_st_click = {
                set_country_flag = level_1_at_st_active
			    if = {
                    limit = {
                        has_country_flag = level_0_at_st_active
                    }
                    clr_country_flag = level_0_at_st_active
                }
            }
            product_buy_one_tx_130T_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_tx_130T_active
                            check_variable = {global.market_tank_holder@22 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tx_130T_chassis_0
                            amount = 100
                            variant_name = "tx_130T V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tx_130T_active
                            check_variable = {global.market_tank_holder@23 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tx_130T_chassis_1
                            amount = 100
                            variant_name = "tx_130T V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_tx_130T_active
                            check_variable = {global.market_tank_holder@22 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tx_130T_holder
                            type = tx_130T_chassis_0
                            amount = 100
                            variant_name = "tx_130T V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tx_130T_active
                            check_variable = {global.market_tank_holder@23 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tx_130T_chassis_1
                            amount = 100
                            variant_name = "tx_130T V2"
                        }
                    }
                }
            }
            product_auto_buy_tx_130T_click = {
                set_country_flag = auto_buy_enabled_tx_130T
            }
            level_0_tx_130T_click = {
                set_country_flag = level_0_tx_130T_active
			    if = {
                    limit = {
                        has_country_flag = level_1_tx_130T_active
                    }
                    clr_country_flag = level_1_tx_130T_active
                }
            }
            level_1_tx_130T_click = {
                set_country_flag = level_1_tx_130T_active
			    if = {
                    limit = {
                        has_country_flag = level_0_tx_130T_active
                    }
                    clr_country_flag = level_0_tx_130T_active
                }
            }
            product_buy_one_at_dp_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_at_dp_active
                            check_variable = {global.market_tank_holder@24 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = at_dp_chassis_0
                            amount = 100
                            variant_name = "at_dp V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_dp_active
                            check_variable = {global.market_tank_holder@25 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_dp_chassis_1
                            amount = 100
                            variant_name = "at_dp V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_at_dp_active
                            check_variable = {global.market_tank_holder@24 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.at_dp_holder
                            type = at_dp_chassis_0
                            amount = 100
                            variant_name = "at_dp V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_at_dp_active
                            check_variable = {global.market_tank_holder@25 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = at_dp_chassis_1
                            amount = 100
                            variant_name = "at_dp V2"
                        }
                    }
                }
            }
            product_auto_buy_at_dp_click = {
                set_country_flag = auto_buy_enabled_at_dp
            }
            level_0_at_dp_click = {
                set_country_flag = level_0_at_dp_active
			    if = {
                    limit = {
                        has_country_flag = level_1_at_dp_active
                    }
                    clr_country_flag = level_1_at_dp_active
                }
            }
            level_1_at_dp_click = {
                set_country_flag = level_1_at_dp_active
			    if = {
                    limit = {
                        has_country_flag = level_0_at_dp_active
                    }
                    clr_country_flag = level_0_at_dp_active
                }
            }
        }
        triggers = {
            auto_buy_display_at_at_visible = {
                has_country_flag = auto_buy_enabled_at_at

            }
            auto_buy_display_at_aa_visible = {
                has_country_flag = auto_buy_enabled_at_aa

            }
            auto_buy_display_juggernaut_visible = {
                has_country_flag = auto_buy_enabled_juggernaut

            }
            auto_buy_display_at_st_visible = {
                has_country_flag = auto_buy_enabled_at_st

            }
            auto_buy_display_tx_130T_visible = {
                has_country_flag = auto_buy_enabled_tx_130T

            }
            auto_buy_display_at_dp_visible = {
                has_country_flag = auto_buy_enabled_at_dp

            }
            product_price_at_at_visible = {
                has_country_flag = level_0_at_at_active
            }
            product_price_level_2_at_at_visible = {
                has_country_flag = level_1_at_at_active
            }
            product_price_at_aa_visible = {
                has_country_flag = level_0_at_aa_active
            }
            product_price_level_2_at_aa_visible = {
                has_country_flag = level_1_at_aa_active
            }
            product_price_juggernaut_visible = {
                has_country_flag = level_0_juggernaut_active
            }
            product_price_level_2_juggernaut_visible = {
                has_country_flag = level_1_juggernaut_active
            }
            product_price_at_st_visible = {
                has_country_flag = level_0_at_st_active
            }
            product_price_level_2_at_st_visible = {
                has_country_flag = level_1_at_st_active
            }
            product_price_tx_130T_visible = {
                has_country_flag = level_0_tx_130T_active
            }
            product_price_level_2_tx_130T_visible = {
                has_country_flag = level_1_tx_130T_active
            }
            product_price_at_dp_visible = {
                has_country_flag = level_0_at_dp_active
            }
            product_price_level_2_at_dp_visible = {
                has_country_flag = level_1_at_dp_active
            }
            level_0_at_at_click_enabled = {
                NOT = {
                    has_country_flag = level_0_at_at_active
                }
            }
            level_1_at_at_click_enabled = {
                NOT = {
                    has_country_flag = level_1_at_at_active
                }
            }
            level_0_at_aa_click_enabled = {
                NOT = {
                    has_country_flag = level_0_at_aa_active
                }
            }
            level_1_at_aa_click_enabled = {
                NOT = {
                    has_country_flag = level_1_at_aa_active
                }
            }
            level_0_juggernaut_click_enabled = {
                NOT = {
                    has_country_flag = level_0_juggernaut_active
                }
            }
            level_1_juggernaut_click_enabled = {
                NOT = {
                    has_country_flag = level_1_juggernaut_active
                }
            }
            level_0_at_st_click_enabled = {
                NOT = {
                    has_country_flag = level_0_at_st_active
                }
            }
            level_1_at_st_click_enabled = {
                NOT = {
                    has_country_flag = level_1_at_st_active
                }
            }
            level_0_tx_130T_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tx_130T_active
                }
            }
            level_1_tx_130T_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tx_130T_active
                }
            }
            level_0_at_dp_click_enabled = {
                NOT = {
                    has_country_flag = level_0_at_dp_active
                }
            }
            level_1_at_dp_click_enabled = {
                NOT = {
                    has_country_flag = level_1_at_dp_active
                }
            }
        }
    }
    Marketplace_buying_ground_2_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_soft_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ground_forces
            has_country_flag = open_second_tab_lazy
        }
        effects = {
            product_buy_one_tie_crawler_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_crawler_active
                            check_variable = {global.market_tank_holder@26 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = tie_crawler_chassis_0
                            amount = 100
                            variant_name = "tie_crawler V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_crawler_active
                            check_variable = {global.market_tank_holder@27 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_crawler_chassis_1
                            amount = 100
                            variant_name = "tie_crawler V2"
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_tie_crawler_active
                            check_variable = {global.market_tank_holder@26 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.tie_crawler_holder
                            type = tie_crawler_chassis_0
                            amount = 100
                            variant_name = "tie_crawler V1"
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_tie_crawler_active
                            check_variable = {global.market_tank_holder@27 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = tie_crawler_chassis_1
                            amount = 100
                            variant_name = "tie_crawler V2"
                        }
                    }
                }
            }
            product_auto_buy_tie_crawler_click = {
                set_country_flag = auto_buy_enabled_tie_crawler
            }
            level_0_tie_crawler_click = {
                set_country_flag = level_0_tie_crawler_active
			    if = {
                    limit = {
                        has_country_flag = level_1_tie_crawler_active
                    }
                    clr_country_flag = level_1_tie_crawler_active
                }
            }
            level_1_tie_crawler_click = {
                set_country_flag = level_1_tie_crawler_active
			    if = {
                    limit = {
                        has_country_flag = level_0_tie_crawler_active
                    }
                    clr_country_flag = level_0_tie_crawler_active
                }
            }
            product_buy_one_E_11_blaster_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@0 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = infantry_equipment_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@1 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@2 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_3_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@3 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_3
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@0 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.E_11_blaster_holder
                            type = infantry_equipment_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@1 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@2 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_2
                            amount = 100
                        }
                    }
                    else_if = {
                        limit = {
                            has_country_flag = level_3_E_11_blaster_active
                            check_variable = {global.soft_market_ic_cost_holder@3 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = infantry_equipment_3
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_E_11_blaster_click = {
                set_country_flag = auto_buy_enabled_E_11_blaster
            }
            level_0_E_11_blaster_click = {
                set_country_flag = level_0_E_11_blaster_active
			    if = {
                    limit = {
                        has_country_flag = level_1_E_11_blaster_active
                    }
                    clr_country_flag = level_1_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_E_11_blaster_active
                    }
                    clr_country_flag = level_2_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_E_11_blaster_active
                    }
                    clr_country_flag = level_3_E_11_blaster_active
                }
            }
            level_1_E_11_blaster_click = {
                set_country_flag = level_1_E_11_blaster_active
			    if = {
                    limit = {
                        has_country_flag = level_0_E_11_blaster_active
                    }
                    clr_country_flag = level_0_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_E_11_blaster_active
                    }
                    clr_country_flag = level_2_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_E_11_blaster_active
                    }
                    clr_country_flag = level_3_E_11_blaster_active
                }
            }
            level_2_E_11_blaster_click = {
                set_country_flag = level_2_E_11_blaster_active
                if = {
                    limit = {
                        has_country_flag = level_1_E_11_blaster_active
                    }
                    clr_country_flag = level_1_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_E_11_blaster_active
                    }
                    clr_country_flag = level_0_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_3_E_11_blaster_active
                    }
                    clr_country_flag = level_3_E_11_blaster_active
                }
            }
            level_3_E_11_blaster_click = {
                set_country_flag = level_3_E_11_blaster_active
                if = {
                    limit = {
                        has_country_flag = level_1_E_11_blaster_active
                    }
                    clr_country_flag = level_1_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_E_11_blaster_active
                    }
                    clr_country_flag = level_2_E_11_blaster_active
                }else_if = {
                    limit = {
                        has_country_flag = level_0_E_11_blaster_active
                    }
                    clr_country_flag = level_0_E_11_blaster_active
                }
            }
            product_buy_one_EE_4_carbine_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_EE_4_carbine_active
                            check_variable = {global.soft_market_ic_cost_holder@4 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = cheap_blaster_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_EE_4_carbine_active
                            check_variable = {global.soft_market_ic_cost_holder@5 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_EE_4_carbine_active
                            check_variable = {global.soft_market_ic_cost_holder@6 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_2
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_EE_4_carbine_active
                            check_variable = {global.soft_market_ic_cost_holder@4 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.EE_4_carbine_holder
                            type = cheap_blaster_0
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_EE_4_carbine_active
                            check_variable = {global.soft_market_ic_cost_holder@5 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_EE_4_carbine_active
                            check_variable = {global.soft_market_ic_cost_holder@6 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = cheap_blaster_2
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_EE_4_carbine_click = {
                set_country_flag = auto_buy_enabled_EE_4_carbine
            }
            level_0_EE_4_carbine_click = {
                set_country_flag = level_0_EE_4_carbine_active
			    if = {
                    limit = {
                        has_country_flag = level_1_EE_4_carbine_active
                    }
                    clr_country_flag = level_1_EE_4_carbine_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_EE_4_carbine_active
                    }
                    clr_country_flag = level_2_EE_4_carbine_active
                }
            }
            level_1_EE_4_carbine_click = {
                set_country_flag = level_1_EE_4_carbine_active
			    if = {
                    limit = {
                        has_country_flag = level_0_EE_4_carbine_active
                    }
                    clr_country_flag = level_0_EE_4_carbine_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_EE_4_carbine_active
                    }
                    clr_country_flag = level_2_EE_4_carbine_active
                }
            }
            level_2_EE_4_carbine_click = {
                set_country_flag = level_2_EE_4_carbine_active
                if = {
                    limit = {
                        has_country_flag = level_0_EE_4_carbine_active
                    }
                    clr_country_flag = level_0_EE_4_carbine_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_EE_4_carbine_active
                    }
                    clr_country_flag = level_1_EE_4_carbine_active
                }
            }
            product_buy_one_smart_rocket_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_smart_rocket_active
                            check_variable = {global.soft_market_ic_cost_holder@7 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = anti_tank_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_smart_rocket_active
                            check_variable = {global.soft_market_ic_cost_holder@8 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_smart_rocket_active
                            check_variable = {global.soft_market_ic_cost_holder@9 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_3
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_smart_rocket_active
                            check_variable = {global.soft_market_ic_cost_holder@7 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.smart_rocket_holder
                            type = anti_tank_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_smart_rocket_active
                            check_variable = {global.soft_market_ic_cost_holder@8 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_smart_rocket_active
                            check_variable = {global.soft_market_ic_cost_holder@9 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = anti_tank_equipment_3
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_smart_rocket_click = {
                set_country_flag = auto_buy_enabled_smart_rocket
            }
            level_0_smart_rocket_click = {
                set_country_flag = level_0_smart_rocket_active
			    if = {
                    limit = {
                        has_country_flag = level_0_smart_rocket_active
                    }
                    clr_country_flag = level_0_smart_rocket_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_smart_rocket_active
                    }
                    clr_country_flag = level_1_smart_rocket_active
                }
            }
            level_1_smart_rocket_click = {
                set_country_flag = level_1_smart_rocket_active
			    if = {
                    limit = {
                        has_country_flag = level_0_smart_rocket_active
                    }
                    clr_country_flag = level_0_smart_rocket_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_smart_rocket_active
                    }
                    clr_country_flag = level_2_smart_rocket_active
                }
            }
            level_2_smart_rocket_click = {
                set_country_flag = level_2_smart_rocket_active
                if = {
                    limit = {
                        has_country_flag = level_0_smart_rocket_active
                    }
                    clr_country_flag = level_0_smart_rocket_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_smart_rocket_active
                    }
                    clr_country_flag = level_1_smart_rocket_active
                }
            }
            product_buy_one_K79_S80_click = {
                if = {
                    limit = {
                        check_variable = {global.market_inf_equip_holder@4 > 0}
                    }
                    if = {
                        limit = {
                            EMP = {
                                NOT = {
                                    has_country_flag = brought_out
                                }
                            }
                        }
                        if = {
                            limit = {
                                has_country_flag = level_0_K79_S80_active
                                check_variable = {global.soft_market_ic_cost_holder@10 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = EMP
                                type = motorized_equipment_1
                                amount = 100
                            }
                        }
                    }else = {
                        if = {
                            limit = {
                                has_country_flag = level_0_K79_S80_active
                                check_variable = {global.soft_market_ic_cost_holder@10 > 0}
                            }
                            add_equipment_to_stockpile = {
                                producer = var:global.K79_S80_holder
                                type = motorized_equipment_1
                                amount = 100
                            }
                        }
                    }
                }
            }
            product_auto_buy_K79_S80_click = {
                set_country_flag = auto_buy_enabled_K79_S80
            }
            product_buy_one_SPHA_click_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_SPHA_active
                            check_variable = {global.soft_market_ic_cost_holder@11 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = artillery_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_SPHA_active
                            check_variable = {global.soft_market_ic_cost_holder@12 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_SPHA_active
                            check_variable = {global.soft_market_ic_cost_holder@13 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_3
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_SPHA_active
                            check_variable = {global.soft_market_ic_cost_holder@11 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.SPHA_holder
                            type = artillery_equipment_1
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_1_SPHA_active
                            check_variable = {global.soft_market_ic_cost_holder@12 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_2
                            amount = 100
                        }
                    }else_if = {
                        limit = {
                            has_country_flag = level_2_SPHA_active
                            check_variable = {global.soft_market_ic_cost_holder@13 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = emp
                            type = artillery_equipment_2
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_SPHA_click = {
                set_country_flag = auto_buy_enabled_SPHA
            }
            level_0_SPHA_click = {
                set_country_flag = level_0_SPHA_active
			    if = {
                    limit = {
                        has_country_flag = level_1_SPHA_active
                    }
                    clr_country_flag = level_1_SPHA_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_SPHA_active
                    }
                    clr_country_flag = level_2_SPHA_active
                }
            }
            level_1_SPHA_click = {
                set_country_flag = level_1_SPHA_active
			    if = {
                    limit = {
                        has_country_flag = level_0_SPHA_active
                    }
                    clr_country_flag = level_0_SPHA_active
                }else_if = {
                    limit = {
                        has_country_flag = level_2_SPHA_active
                    }
                    clr_country_flag = level_2_SPHA_active
                }
            }
            level_2_SPHA_click = {
                set_country_flag = level_2_SPHA_active
                if = {
                    limit = {
                        has_country_flag = level_0_SPHA_active
                    }
                    clr_country_flag = level_0_SPHA_active
                }else_if = {
                    limit = {
                        has_country_flag = level_1_SPHA_active
                    }
                    clr_country_flag = level_1_SPHA_active
                }
            }
        }
        triggers = {
            auto_buy_display_tie_crawler_visible = {
                has_country_flag = auto_buy_enabled_tie_crawler

            }
            auto_buy_display_E_11_blaster_visible = {
                has_country_flag = auto_buy_enabled_E_11_blaster

            }
            auto_buy_display_EE_4_carbine_visible = {
                has_country_flag = auto_buy_enabled_EE_4_carbine

            }
            auto_buy_display_smart_rocket_visible = {
                has_country_flag = auto_buy_enabled_smart_rocket

            }
            auto_buy_display_K79_S80_visible = {
                has_country_flag = auto_buy_enabled_K79_S80

            }
            auto_buy_display_SPHA_visible = {
                has_country_flag = auto_buy_enabled_SPHA

            }
            level_0_tie_crawler_click_enabled = {
                NOT = {
                    has_country_flag = level_0_tie_crawler_active
                }
            }
            level_1_tie_crawler_click_enabled = {
                NOT = {
                    has_country_flag = level_1_tie_crawler_active
                }
            }
            product_price_tie_crawler_visible = {
                has_country_flag = level_0_tie_crawler_active
            }
            product_price_level_2_tie_crawler_visible = {
                has_country_flag = level_1_tie_crawler_active
            }
            product_price_E_11_blaster_visible = {
                has_country_flag = level_0_E_11_blaster_active
            }
            product_price_level_2_E_11_blaster_visible = {
                has_country_flag = level_1_E_11_blaster_active
            }
            product_price_level_3_E_11_blaster_visible = {
                has_country_flag = level_2_E_11_blaster_active
            }
            product_price_level_4_E_11_blaster_visible = {
                has_country_flag = level_3_E_11_blaster_active
            }
            product_price_EE_4_carbine_visible = {
                has_country_flag = level_0_EE_4_carbine_active
            }
            product_price_level_2_EE_4_carbine_visible = {
                has_country_flag = level_1_EE_4_carbine_active
            }
            product_price_level_3_EE_4_carbine_visible = {
                has_country_flag = level_2_EE_4_carbine_active
            }
            product_price_smart_rocket_visible = {
                has_country_flag = level_0_smart_rocket_active
            }
            product_price_level_2_smart_rocket_visible = {
                has_country_flag = level_1_smart_rocket_active
            }
            product_price_level_3_smart_rocket_visible = {
                has_country_flag = level_2_smart_rocket_active
            }
            product_price_SPHA_visible = {
                has_country_flag = level_0_SPHA_active
            }
            product_price_level_2_SPHA_visible = {
                has_country_flag = level_1_SPHA_active
            }
            product_price_level_3_SPHA_visible = {
                has_country_flag = level_2_SPHA_active
            }
            level_0_E_11_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_0_E_11_blaster_active
                }
            }
            level_1_E_11_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_1_E_11_blaster_active
                }
            }
            level_2_E_11_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_2_E_11_blaster_active
                }
            }
            level_3_E_11_blaster_click_enabled = {
                NOT = {
                    has_country_flag = level_3_E_11_blaster_active
                }
            }
            level_0_EE_4_carbine_click_enabled = {
                NOT = {
                    has_country_flag = level_0_EE_4_carbine_active
                }
            }
            level_1_EE_4_carbine_click_enabled = {
                NOT = {
                    has_country_flag = level_1_EE_4_carbine_active
                }
            }
            level_2_EE_4_carbine_click_enabled = {
                NOT = {
                    has_country_flag = level_2_EE_4_carbine_active
                }
            }
            level_0_smart_rocket_click_enabled = {
                NOT = {
                    has_country_flag = level_0_smart_rocket_active
                }
            }
            level_1_smart_rocket_click_enabled = {
                NOT = {
                    has_country_flag = level_1_smart_rocket_active
                }
            }
            level_2_smart_rocket_click_enabled = {
                NOT = {
                    has_country_flag = level_2_smart_rocket_active
                }
            }
            level_0_SPHA_click_enabled = {
                NOT = {
                    has_country_flag = level_0_SPHA_active
                }
            }
            level_1_SPHA_click_enabled = {
                NOT = {
                    has_country_flag = level_1_SPHA_active
                }
            }
            level_2_SPHA_click_enabled = {
                NOT = {
                    has_country_flag = level_2_SPHA_active
                }
            }
        }
    }
    Marketplace_buying_ground_3_imperial_menu = {
        context_type = player_context
        window_name = "Marketplace_buying_ground_3_imperial_menu"
        parent_window_name = "Marketplace_buying_menu"
        visible = {
            has_country_flag = imperial_market_open
            has_country_flag = open_market_ground_forces
            has_country_flag = open_third_tab_lazy
        }
        effects = {
            product_buy_one_imperial_supply_equipment_click = {
                if = {
                    limit = {
                        EMP = {
                            NOT = {
                                has_country_flag = brought_out
                            }
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = level_0_imperial_supply_equipment_active
                            check_variable = {global.soft_market_ic_cost_holder@14 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = EMP
                            type = support_equipment_1
                            amount = 100
                        }
                    }
                }else = {
                    if = {
                        limit = {
                            has_country_flag = level_0_imperial_supply_equipment_active
                            check_variable = {global.soft_market_ic_cost_holder@14 > 0}
                        }
                        add_equipment_to_stockpile = {
                            producer = var:global.imperial_supply_equipment_holder
                            type = support_equipment_1
                            amount = 100
                        }
                    }
                }
            }
            product_auto_buy_imperial_supply_equipment_click = {
                set_country_flag = auto_buy_enabled_imperial_supply_equipment
            }
        }
        triggers = {
            auto_buy_display_imperial_supply_equipment_visible = {
                has_country_flag = auto_buy_enabled_imperial_supply_equipment

            }
        }
    }
}    ################################################################################## BUYING SHIPS END #########################################################################